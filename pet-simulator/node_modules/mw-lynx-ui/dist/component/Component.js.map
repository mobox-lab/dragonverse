{"version":3,"file":"Component.js","sources":["../../component/Component.ts"],"sourcesContent":["import { Property } from \"../style/Property\";\r\nimport { Delegate } from \"gtoolkit\";\r\n\r\nexport abstract class Component {\r\n    protected static create(): Component {\r\n        throw new Error(\"not implemented.\");\r\n    }\r\n\r\n    protected static defaultOption(): unknown {\r\n        throw new Error(\"not implemented.\");\r\n    }\r\n\r\n    private _root: mw.Canvas;\r\n\r\n    protected initRoot(_root?: mw.Canvas): void {\r\n        this._root = _root ?\r\n            _root :\r\n            mw.Canvas.newObject(undefined, \"root\");\r\n        this._root.visibility = mw.SlateVisibility.SelfHitTestInvisible;\r\n        if (this._root.destroyObject === this._root.constructor.prototype.destroyObject) {\r\n            this._root.destroyObject = () => {\r\n                if (this.renderAnimHandler) {\r\n                    mw.TimeUtil.onEnterFrame.remove(this.renderAnim);\r\n                }\r\n                this.destroy();\r\n                this._root.destroyObject();\r\n            };\r\n        }\r\n        if (this.renderAnimHandler) {\r\n            mw.TimeUtil.onEnterFrame.add(this.renderAnim);\r\n        }\r\n    }\r\n\r\n    public get root(): mw.Canvas {\r\n        if (!this._root) this.initRoot();\r\n\r\n        return this._root;\r\n    }\r\n\r\n    protected destroy(): void {\r\n    };\r\n\r\n    public attach(canvas: mw.Canvas | Component): this {\r\n        if (canvas instanceof mw.Canvas) {\r\n            canvas.addChild(this.root);\r\n        } else {\r\n            canvas.root.addChild(this.root);\r\n        }\r\n\r\n        this.onAttach.invoke();\r\n        return this;\r\n    }\r\n\r\n    public detach() {\r\n        this.onDetach.invoke();\r\n        this._root?.removeObject();\r\n    }\r\n\r\n    private renderAnim: (dt: number) => void = (dt) => {\r\n        if (this._root && this._root.visible) {\r\n            this.renderAnimHandler(dt);\r\n        }\r\n    };\r\n\r\n    protected renderAnimHandler: (dt: number) => void;\r\n\r\n    //#region Event\r\n    public onAttach: Delegate.SimpleDelegate<void> = new Delegate.SimpleDelegate<void>().setProtected();\r\n\r\n    public onDetach: Delegate.SimpleDelegate<void> = new Delegate.SimpleDelegate<void>().setProtected();\r\n    //#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n}\r\n\r\nexport interface ComponentOption<S = { x: number, y: number }> {\r\n    size?: S;\r\n\r\n    padding?: Property.Padding;\r\n\r\n    zOrder?: number;\r\n}"],"names":[],"mappings":";;MAGsB,SAAS,CAAA;AAA/B,IAAA,WAAA,GAAA;AAuDY,QAAA,IAAA,CAAA,UAAU,GAAyB,CAAC,EAAE,KAAI;YAC9C,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;AAClC,gBAAA,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;aAC9B;AACL,SAAC,CAAC;;QAKK,IAAQ,CAAA,QAAA,GAAkC,IAAI,QAAQ,CAAC,cAAc,EAAQ,CAAC,YAAY,EAAE,CAAC;QAE7F,IAAQ,CAAA,QAAA,GAAkC,IAAI,QAAQ,CAAC,cAAc,EAAQ,CAAC,YAAY,EAAE,CAAC;;KAEvG;AAnEa,IAAA,OAAO,MAAM,GAAA;AACnB,QAAA,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;KACvC;AAES,IAAA,OAAO,aAAa,GAAA;AAC1B,QAAA,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;KACvC;AAIS,IAAA,QAAQ,CAAC,KAAiB,EAAA;AAChC,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK;AACd,YAAA,KAAK;YACL,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC,eAAe,CAAC,oBAAoB,CAAC;AAChE,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,KAAK,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa,EAAE;AAC7E,YAAA,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,MAAK;AAC5B,gBAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;oBACxB,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACpD;gBACD,IAAI,CAAC,OAAO,EAAE,CAAC;AACf,gBAAA,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;AAC/B,aAAC,CAAC;SACL;AACD,QAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;YACxB,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACjD;KACJ;AAED,IAAA,IAAW,IAAI,GAAA;QACX,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;QAEjC,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;IAES,OAAO,GAAA;KAChB;;AAEM,IAAA,MAAM,CAAC,MAA6B,EAAA;AACvC,QAAA,IAAI,MAAM,YAAY,EAAE,CAAC,MAAM,EAAE;AAC7B,YAAA,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC9B;aAAM;YACH,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACnC;AAED,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,QAAA,OAAO,IAAI,CAAC;KACf;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,CAAC;KAC9B;AAeJ;;;;"}