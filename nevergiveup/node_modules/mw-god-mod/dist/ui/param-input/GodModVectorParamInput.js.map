{"version":3,"file":"GodModVectorParamInput.js","sources":["../../../ui/param-input/GodModVectorParamInput.ts"],"sourcesContent":["import { IGodModParamInputParametric, ParamInputSizeY } from \"../param-base/IGodModParamInput\";\r\nimport Gtk, { Delegate } from \"gtoolkit\";\r\nimport { Lui, Property, PropertyUtil, TextField } from \"mw-lynx-ui\";\r\nimport { GodModPanelSizeX } from \"../base/GodModPanelConst\";\r\nimport { GodModParamInputBase } from \"../param-base/GodModParamInputBase\";\r\nimport Log4Ts from \"mw-log4ts/Log4Ts\";\r\nimport Color = Lui.Asset.Color;\r\n\r\n/**\r\n * GodModVectorParamInput.\r\n *\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n * @internal\r\n */\r\nexport default class GodModVectorParamInput\r\n    extends GodModParamInputBase\r\n    implements IGodModParamInputParametric<mw.Vector> {\r\n    private _inputX: TextField;\r\n    private _inputY: TextField;\r\n    private _inputZ: TextField;\r\n\r\n    private _validator: Property.DataValidators<mw.Vector>;\r\n\r\n//#region Lui Component\r\n    public static create(): GodModVectorParamInput {\r\n        let input = new GodModVectorParamInput();\r\n\r\n        input._inputX = TextField.create({\r\n            label: \"x\",\r\n            size: {x: 135, y: ParamInputSizeY},\r\n            padding: {right: 5},\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            fontSize: 16,\r\n            fontStyle: mw.UIFontGlyph.Light,\r\n            corner: Property.Corner.Top,\r\n            type: mw.InputTextLimit.LimitToFloat,\r\n        }).attach(input);\r\n\r\n        input._inputY = TextField.create({\r\n            label: \"y\",\r\n            size: {x: 135, y: ParamInputSizeY},\r\n            padding: {right: 5},\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            fontSize: 16,\r\n            fontStyle: mw.UIFontGlyph.Light,\r\n            corner: Property.Corner.Top,\r\n            type: mw.InputTextLimit.LimitToFloat,\r\n        }).attach(input);\r\n        Gtk.setUiPositionX(input._inputY.root, 135);\r\n\r\n        input._inputZ = TextField.create({\r\n            label: \"z\",\r\n            size: {x: 130, y: ParamInputSizeY},\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            fontSize: 16,\r\n            fontStyle: mw.UIFontGlyph.Light,\r\n            corner: Property.Corner.Top,\r\n            type: mw.InputTextLimit.LimitToFloat,\r\n        }).attach(input);\r\n        Gtk.setUiPositionX(input._inputZ.root, 270);\r\n\r\n        Gtk.setUiSize(input.root, GodModPanelSizeX, ParamInputSizeY);\r\n\r\n        return input;\r\n    };\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region IGodModParamInputParametric\r\n    public getParam(): mw.Vector {\r\n        return new mw.Vector(\r\n            Number(this._inputX.text),\r\n            Number(this._inputY.text),\r\n            Number(this._inputZ.text));\r\n    }\r\n\r\n    public setParam(p: mw.Vector) {\r\n        this._inputX.setContent(p?.x?.toString() ?? \"\");\r\n        this._inputY.setContent(p?.y?.toString() ?? \"\");\r\n        this._inputZ.setContent(p?.z?.toString() ?? \"\");\r\n    }\r\n\r\n    public setValidator(validator: Property.DataValidators<mw.Vector>): void {\r\n        this._validator = validator;\r\n    }\r\n\r\n    public setCustomLabel(label?: string): void {\r\n        if (!label) return;\r\n        Log4Ts.warn(GodModVectorParamInput,\r\n            `custom label not supported when Vector param.`);\r\n    }\r\n\r\n    public get validated(): Property.DataValidateResult {\r\n        if (Gtk.isNullOrEmpty(this._validator)) return {result: true};\r\n        let param = this.getParam();\r\n\r\n        return PropertyUtil.validate(this._validator, param);\r\n    }\r\n\r\n    private _onCommit: Delegate.SimpleDelegate;\r\n\r\n    public get onCommit(): Delegate.SimpleDelegate {\r\n        if (!this._onCommit) {\r\n            this._onCommit = new Delegate.SimpleDelegate();\r\n            this._inputX.onCommit.add(() => this._onCommit.invoke());\r\n            this._inputY.onCommit.add(() => this._onCommit.invoke());\r\n            this._inputZ.onCommit.add(() => this._onCommit.invoke());\r\n        }\r\n\r\n        return this._onCommit;\r\n    }\r\n\r\n//#endregion\r\n}"],"names":[],"mappings":"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"}