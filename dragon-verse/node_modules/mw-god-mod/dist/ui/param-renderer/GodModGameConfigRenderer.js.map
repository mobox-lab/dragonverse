{"version":3,"file":"GodModGameConfigRenderer.js","sources":["../../../ui/param-renderer/GodModGameConfigRenderer.ts"],"sourcesContent":["import { Component, Lui } from \"mw-lynx-ui\";\r\nimport { IElementBase } from \"../../GodModParam\";\r\nimport Gtk from \"gtoolkit\";\r\nimport { GodModPanelSizeX } from \"../base/GodModPanelConst\";\r\nimport ColorUtil = Lui.Asset.ColorUtil;\r\n\r\n/**\r\n * GodModGameConfigRenderer.\r\n *\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n * @internal\r\n */\r\nexport default class GodModGameConfigRenderer extends Component {\r\n//#region Constant\r\n    public static readonly GodModGameConfigItemSizeY = 30;\r\n\r\n    public static readonly GodModGameConfigItemPaddingLeft = 10;\r\n\r\n    public static readonly GodModGameConfigSubItemPaddingLeft = 30;\r\n\r\n    public static readonly RegForName = /^name$/i;\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    private _idRenderer: mw.TextBlock;\r\n\r\n    private _nameRenderer: mw.TextBlock;\r\n\r\n    private _descFields: mw.TextBlock[] = [];\r\n\r\n    private _show: boolean = false;\r\n\r\n    public get show() {\r\n        return this._show;\r\n    }\r\n\r\n    public set show(val: boolean) {\r\n        this._show = val;\r\n    }\r\n\r\n//#region Lui Component\r\n    public static create(): GodModGameConfigRenderer {\r\n        let renderer = new GodModGameConfigRenderer();\r\n\r\n        renderer._idRenderer = mw.TextBlock.newObject(renderer.root, \"txtId\");\r\n        renderer._idRenderer.glyph = mw.UIFontGlyph.Bold;\r\n        renderer._idRenderer.fontSize = 16;\r\n        renderer._idRenderer.setFontColorByHex(ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Black, 0.8));\r\n        Gtk.setUiPosition(renderer._idRenderer, this.GodModGameConfigItemPaddingLeft, 0);\r\n        Gtk.setUiSize(renderer._idRenderer, GodModPanelSizeX / 2 - this.GodModGameConfigItemPaddingLeft, this.GodModGameConfigItemSizeY);\r\n\r\n        renderer._nameRenderer = mw.TextBlock.newObject(renderer.root, \"txtName\");\r\n        renderer._nameRenderer.glyph = mw.UIFontGlyph.Bold;\r\n        renderer._nameRenderer.fontSize = 16;\r\n        renderer._nameRenderer.setFontColorByHex(ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Black, 0.8));\r\n        Gtk.setUiPosition(renderer._nameRenderer, GodModPanelSizeX / 2, 0);\r\n        Gtk.setUiSize(renderer._nameRenderer, GodModPanelSizeX / 2, this.GodModGameConfigItemSizeY);\r\n\r\n        renderer.render();\r\n\r\n        return renderer;\r\n    };\r\n\r\n    protected renderAnimHandler = (dt: number) => {\r\n        if (this._show && this.root.renderOpacity < 1) {\r\n            this.root.renderOpacity = Math.min(\r\n                1,\r\n                this.root.renderOpacity + dt / Lui.Asset.Interval.VeryFast);\r\n        }\r\n        if (!this._show && this.root.renderOpacity > 0) {\r\n            this.root.renderOpacity = Math.max(\r\n                0,\r\n                this.root.renderOpacity - dt / Lui.Asset.Interval.Fast);\r\n        }\r\n    };\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    public render(config?: IElementBase): this {\r\n        let lineCount = 0;\r\n        let nameRendered: boolean = false;\r\n\r\n        if (Gtk.isNullOrUndefined(config)) {\r\n            Gtk.trySetText(this._idRenderer, \"Not exist.\");\r\n        } else {\r\n            Gtk.trySetText(this._idRenderer, `id: ${config.id}`);\r\n            for (const key in config) {\r\n                if (key === \"id\") continue;\r\n                if (!nameRendered && GodModGameConfigRenderer.RegForName.test(key)) {\r\n                    Gtk.trySetText(this._nameRenderer, `name: ${config[key]}`);\r\n                    nameRendered = true;\r\n                }\r\n                this.renderItem(key, config[key], lineCount++);\r\n            }\r\n        }\r\n\r\n        if (!nameRendered) Gtk.trySetText(this._nameRenderer, \"\");\r\n        for (let i = lineCount; i < this._descFields.length; ++i) {\r\n            Gtk.trySetVisibility(this._descFields[i], false);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    private renderItem(name: string, value: string, index: number) {\r\n        let line: mw.TextBlock;\r\n        if (index >= this._descFields.length) {\r\n            line = mw.TextBlock.newObject(this.root, \"txtDesc\" + index);\r\n            this._descFields.push(line);\r\n            Gtk.setUiSize(line,\r\n                GodModPanelSizeX - GodModGameConfigRenderer.GodModGameConfigSubItemPaddingLeft,\r\n                GodModGameConfigRenderer.GodModGameConfigItemSizeY);\r\n            Gtk.setUiPosition(line,\r\n                GodModGameConfigRenderer.GodModGameConfigSubItemPaddingLeft,\r\n                GodModGameConfigRenderer.GodModGameConfigItemSizeY * (index + 1));\r\n            line.fontSize = 14;\r\n            line.glyph = mw.UIFontGlyph.Normal;\r\n            line.setFontColorByHex(ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Gray800, 0.8));\r\n        } else {\r\n            line = this._descFields[index];\r\n        }\r\n\r\n        line.text = `${name}: ${value}`;\r\n        Gtk.trySetVisibility(line, true);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}