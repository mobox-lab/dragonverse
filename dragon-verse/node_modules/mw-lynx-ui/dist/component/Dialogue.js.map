{"version":3,"file":"Dialogue.js","sources":["../../component/Dialogue.ts"],"sourcesContent":["import Gtk, { Delegate } from \"gtoolkit\";\r\nimport { Property, PropertyUtil } from \"../style/Property\";\r\nimport { Component, ComponentOption, extractLayoutFromOption, overrideOption } from \"./Component\";\r\nimport { Lui } from \"../style/Asset\";\r\nimport { ClickEvent } from \"../event/ClickEvent\";\r\nimport { Button, ButtonVariant } from \"./Button\";\r\nimport Enumerable from \"linq\";\r\nimport ThemeColor = Lui.Asset.ThemeColor;\r\nimport Log4Ts from \"mw-log4ts/Log4Ts\";\r\n\r\n/**\r\n * Dialogue.\r\n *\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nexport class Dialogue extends Component {\r\n//#region Constant\r\n    public static readonly DialogueContentPaddingHorizontal = 50;\r\n\r\n    public static readonly DialogueContentPaddingVertical = 30;\r\n\r\n    public static readonly DialogueMessageLeftIndent = 30;\r\n\r\n    public static readonly DialogueTitleSizeY = 80;\r\n\r\n    public static readonly DialogueButtonPaddingTop = 20;\r\n\r\n    public static readonly DialogueButtonSizeY = 60;\r\n\r\n    public static readonly DialogueButtonMaxSizeX = 200;\r\n\r\n    public static readonly DialogueButtonSpace = 10;\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    private _btnModal: mw.Button;\r\n\r\n    private _imgBack: mw.Image;\r\n\r\n    private _txtTitle: mw.TextBlock;\r\n\r\n    private _txtMessage: mw.TextBlock;\r\n\r\n    private _btnList: Button[] = [];\r\n\r\n    private _option: Required<DialogueOption>;\r\n\r\n//#region Lui Component\r\n    public static create(option?: DialogueOption): Dialogue {\r\n        let dialogue = new Dialogue();\r\n\r\n        dialogue.root.name = \"LuiDialogue\";\r\n        dialogue.onAttach.add(() => {\r\n            dialogue.root.zOrder = Enumerable\r\n                .from(Gtk.getUiChildren(dialogue.root.parent))\r\n                .select(widget => widget.zOrder)\r\n                .where(zOrder => zOrder > 600000 && zOrder < 700000)\r\n                .defaultIfEmpty(600000)\r\n                .max() + 1;\r\n\r\n            const viewPortSize = Gtk.getUiVirtualFullSize();\r\n            const viewPortAbsPos = mw.UIService.canvas.cachedGeometry.getAbsolutePosition();\r\n            const posParAbs = dialogue.root.parent.cachedGeometry.getAbsolutePosition();\r\n            Gtk.setUiPosition(dialogue.root,\r\n                (viewPortSize.x - dialogue.root.size.x) / 2\r\n                + (viewPortAbsPos.x - posParAbs.x) / mw.getViewportScale(),\r\n                (viewPortSize.y - dialogue.root.size.y) / 2\r\n                + (viewPortAbsPos.y - posParAbs.y) / mw.getViewportScale());\r\n        });\r\n\r\n        dialogue._option = Dialogue.defaultOption(option);\r\n\r\n        dialogue._btnModal = mw.Button.newObject(dialogue.root, \"btnModal\");\r\n        Gtk.trySetVisibility(dialogue._btnModal, true);\r\n        dialogue._btnModal.normalImageDrawType = mw.SlateBrushDrawType.NoDrawType;\r\n        dialogue._btnModal.transitionEnable = false;\r\n        if (!dialogue._option.modal) dialogue._btnModal.onClicked.add(() => dialogue.close());\r\n\r\n        dialogue._imgBack = mw.Image.newObject(dialogue.root, \"imgBack\");\r\n        Gtk.trySetVisibility(dialogue._imgBack, true);\r\n        dialogue._imgBack.imageGuid = Lui.Asset.ImgRoundedRectangle;\r\n        dialogue._imgBack.imageDrawType = mw.SlateBrushDrawType.PixcelBox;\r\n        dialogue._imgBack.margin = new mw.Margin(\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.left,\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.top,\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.right,\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.bottom,\r\n        );\r\n\r\n        dialogue._txtTitle = mw.TextBlock.newObject(dialogue.root, \"txtTitle\");\r\n        PropertyUtil.applyFontSize(dialogue._txtTitle,\r\n            typeof dialogue._option.fontSize === \"number\" ?\r\n                Math.ceil(dialogue._option.fontSize * 1.5) :\r\n                dialogue._option.fontSize);\r\n        dialogue._txtTitle.glyph = mw.UIFontGlyph.Bold;\r\n        dialogue._txtTitle.autoAdjust = false;\r\n        dialogue._txtTitle.text = dialogue._option.title ?? \"\";\r\n        dialogue._txtTitle.textVerticalAlign = mw.TextVerticalJustify.Top;\r\n        dialogue._txtTitle.textAlign = mw.TextJustify.Left;\r\n        dialogue._txtTitle.setFontColorByHex(\r\n            Lui.Asset.ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Black, 1));\r\n\r\n        dialogue._txtMessage = mw.TextBlock.newObject(dialogue.root, \"txtMessage\");\r\n        PropertyUtil.applyFontSize(dialogue._txtMessage, dialogue._option.fontSize);\r\n        dialogue._txtMessage.glyph = mw.UIFontGlyph.Light;\r\n        dialogue._txtMessage.autoAdjust = false;\r\n        dialogue._txtMessage.text = dialogue._option.message ?? \"\";\r\n        dialogue._txtMessage.textVerticalAlign = mw.TextVerticalJustify.Top;\r\n        dialogue._txtMessage.textAlign = mw.TextJustify.Left;\r\n        dialogue._txtMessage.textHorizontalLayout = mw.UITextHorizontalLayout.AutoWarpText;\r\n        dialogue._txtMessage.setFontColorByHex(\r\n            Lui.Asset.ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Gray900, 1));\r\n\r\n        dialogue.renderFeedbacks();\r\n\r\n        return dialogue;\r\n    }\r\n\r\n    public static defaultOption(option?: DialogueOption): Required<DialogueOption> {\r\n        if (!option) option = {};\r\n\r\n        if (!option.size) option.size = {x: 800, y: 400};\r\n        if (!option.title) option.title = \"Title\";\r\n        if (!option.padding) option.padding = {\r\n            left: Dialogue.DialogueContentPaddingHorizontal,\r\n            right: Dialogue.DialogueContentPaddingHorizontal,\r\n            top: Dialogue.DialogueContentPaddingVertical,\r\n            bottom: Dialogue.DialogueContentPaddingVertical,\r\n        };\r\n        if (!option.fontSize) option.fontSize = 24;\r\n\r\n        return option as Required<DialogueOption>;\r\n    }\r\n\r\n    public setLayout(option: DialogueOption): this {\r\n        overrideOption(this._option, option);\r\n        super.setLayout(this._option);\r\n        let [[x, y],\r\n            [pt, pr, pb, pl],\r\n            [contentX, contentY],\r\n        ] = extractLayoutFromOption(this._option);\r\n        const viewPortSize = Gtk.getUiVirtualFullSize();\r\n\r\n        Gtk.setUiPosition(this._btnModal, 0, 0);\r\n        this._btnModal.size = viewPortSize;\r\n\r\n        Gtk.setUiPosition(this._imgBack, 0, 0);\r\n        Gtk.setUiSize(this._imgBack, x, y);\r\n\r\n        Gtk.setUiPosition(this._txtTitle, pl, pt);\r\n        Gtk.setUiSize(this._txtTitle,\r\n            contentX,\r\n            Dialogue.DialogueTitleSizeY);\r\n\r\n        Gtk.setUiPosition(this._txtMessage,\r\n            pl + Dialogue.DialogueMessageLeftIndent,\r\n            pt + +Dialogue.DialogueTitleSizeY);\r\n        Gtk.setUiSize(this._txtMessage,\r\n            contentX - Dialogue.DialogueMessageLeftIndent,\r\n            contentY\r\n            - Dialogue.DialogueTitleSizeY\r\n            - Dialogue.DialogueButtonPaddingTop\r\n            - Dialogue.DialogueButtonSizeY,\r\n        );\r\n\r\n        let sizedSum = Enumerable\r\n            .from(this._option.feedbacks)\r\n            .sum(item => item?.size ?? 0);\r\n        let lastPerWidth = Math.min(Math.max(0,\r\n                contentX - sizedSum\r\n                - Math.max(0, (this._option.feedbacks?.length ?? 0) - 1) * Dialogue.DialogueButtonSpace)\r\n            / (this._option.feedbacks?.length ?? 1),\r\n            Dialogue.DialogueButtonMaxSizeX);\r\n\r\n        let offsetX = pl + contentX;\r\n        for (let i = 0; i < this._btnList.length; ++i) {\r\n            const feedback = this._option.feedbacks?.[i];\r\n            const button = this._btnList[i];\r\n\r\n            let sizeX = feedback?.size ?? lastPerWidth;\r\n            button.setLayout({size: {x: sizeX, y: undefined}});\r\n            offsetX -= sizeX + Dialogue.DialogueButtonSpace;\r\n            Gtk.setUiPosition(button.root, offsetX, pt + contentY - Dialogue.DialogueButtonSizeY);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    public renderText(title?: string, message?: string): this {\r\n        this._option.title = title;\r\n        this._option.message = message;\r\n\r\n        this._txtTitle.text = this._option.title ?? \"\";\r\n        this._txtMessage.text = this._option.message ?? \"\";\r\n\r\n        return this;\r\n    }\r\n\r\n    public renderFeedbacks(feedbacks?: DialogueFeedback[]): this {\r\n        if (feedbacks !== undefined &&\r\n            this._option.feedbacks !== feedbacks) {\r\n            this._option.feedbacks = feedbacks;\r\n        }\r\n\r\n        this._btnList.forEach((btn) => {\r\n            btn.root.destroyObject();\r\n        });\r\n        this._btnList.length = 0;\r\n\r\n        let i = 0;\r\n        for (; i < this._option.feedbacks?.length; ++i) {\r\n            const feedback = this._option.feedbacks[i];\r\n            let theme: ThemeColor;\r\n            let btnVariant: ButtonVariant;\r\n\r\n            switch (feedback.variant) {\r\n                case \"warning\":\r\n                    theme = {\r\n                        primary: Lui.Asset.Color.Red,\r\n                        secondary: Lui.Asset.Color.Red200,\r\n                    };\r\n                    btnVariant = i === 0 ? \"contained\" : \"outlined\";\r\n                    break;\r\n                case \"normal\":\r\n                default:\r\n                    theme = {\r\n                        primary: Lui.Asset.Color.Blue,\r\n                        secondary: Lui.Asset.Color.Blue200,\r\n                    };\r\n                    btnVariant = i === 0 ? \"contained\" : \"outlined\";\r\n                    break;\r\n            }\r\n\r\n            let btn = Button.create({\r\n                size: {x: feedback.size ?? 0, y: Dialogue.DialogueButtonSizeY},\r\n                label: feedback.label,\r\n                fontSize: this._option.fontSize,\r\n                color: theme,\r\n                variant: btnVariant,\r\n            }).attach(this.root);\r\n            btn.onClick.add(() => {\r\n                try {\r\n                    feedback?.callback();\r\n                } catch (e) {\r\n                    Log4Ts.log(Dialogue, `error occurs in feedback callback.`, e);\r\n                }\r\n\r\n                this.close();\r\n            });\r\n            this._btnList.push(btn);\r\n        }\r\n\r\n        if (i === 0) {\r\n            const btn = Button.create({\r\n                size: {x: 20, y: Dialogue.DialogueButtonSizeY},\r\n                label: \"OK\",\r\n                fontSize: this._option.fontSize,\r\n                color: {\r\n                    primary: Lui.Asset.Color.Blue,\r\n                    secondary: Lui.Asset.Color.Blue200,\r\n                },\r\n                variant: \"contained\",\r\n            }).attach(this.root);\r\n            btn.onClick.add(() => this.close());\r\n            this._btnList.push(btn);\r\n        }\r\n\r\n        this.setLayout(this._option);\r\n        return this;\r\n    }\r\n\r\n    public close() {\r\n        this.root.destroyObject();\r\n    }\r\n\r\n//#region CallBack\r\n    public onClick: Delegate.SimpleDelegate<ClickEvent> = new Delegate.SimpleDelegate();\r\n\r\n    public onPress: Delegate.SimpleDelegate<ClickEvent> = new Delegate.SimpleDelegate();\r\n\r\n    public onRelease: Delegate.SimpleDelegate<ClickEvent> = new Delegate.SimpleDelegate();\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n}\r\n\r\nexport interface DialogueOption extends ComponentOption {\r\n    title?: string;\r\n\r\n    message?: string;\r\n\r\n    /**\r\n     * 模态的.\r\n     * @desc 模态窗口 除非用户在界面本身提供的途径关闭对话框，否则用户无法与界面的其他部分进行交互.\r\n     */\r\n    modal?: boolean;\r\n\r\n    fontSize?: Property.FontSize;\r\n\r\n    feedbacks?: DialogueFeedback[];\r\n}\r\n\r\nexport type DialogueFeedbackVariant = \"normal\" | \"warning\";\r\n\r\nexport interface DialogueFeedback {\r\n    size?: number;\r\n\r\n    label?: string;\r\n\r\n    callback?: () => void;\r\n\r\n    variant?: DialogueFeedbackVariant;\r\n}"],"names":[],"mappings":"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"}