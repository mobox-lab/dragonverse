{"version":3,"file":"GodModPanel.js","sources":["../../ui/GodModPanel.ts"],"sourcesContent":["import { AcceptableParamType, ConfigBase, GodModInferParamForTransmit, IElementBase } from \"../GodModParam\";\r\nimport { GodModParamInputComponent } from \"./param-base/IGodModParamInput\";\r\nimport GodModStringParamInput from \"./param-input/GodModStringParamInput\";\r\nimport GodModNumberParamInput from \"./param-input/GodModNumberParamInput\";\r\nimport GodModIntegerParamInput from \"./param-input/GodModIntegerParamInput\";\r\nimport GodModVectorParamInput from \"./param-input/GodModVectorParamInput\";\r\nimport Gtk from \"gtoolkit\";\r\nimport { AutoComplete, Button, Component, Dialogue, Lui, Property } from \"mw-lynx-ui\";\r\nimport { GodCommandItem } from \"../GodCommandItem\";\r\nimport { GodModPanelSizeX } from \"./base/GodModPanelConst\";\r\nimport GodModEnumParamInput from \"./param-input/GodModEnumParamInput\";\r\nimport { ExpandIcon } from \"./icon/ExpandIcon\";\r\nimport { MoveIcon } from \"./icon/MoveIcon\";\r\nimport { PlatformIcon, PlatformIconVariant } from \"./icon/PlatformIcon\";\r\nimport GodModGameConfigRenderer from \"./param-renderer/GodModGameConfigRenderer\";\r\nimport GodModGameConfigParamInput from \"./param-input/GodModGameConfigParamInput\";\r\nimport Color = Lui.Asset.Color;\r\nimport ColorUtil = Lui.Asset.ColorUtil;\r\nimport Interval = Lui.Asset.Interval;\r\n\r\nexport class GodModPanel extends Component {\r\n//#region Constant\r\n    private static readonly TipsShownTime = 2e3;\r\n\r\n    private static readonly TipsFadeTime = 1e3;\r\n\r\n    private static readonly BtnRunSizeY = 60;\r\n\r\n    private static readonly TxtInfoSizeY = 30;\r\n\r\n    private static readonly AutoShrinkFloatTime = 3e3;\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    private _cnvMain: mw.Canvas;\r\n\r\n    private _cnvController: mw.Canvas;\r\n\r\n    private _btnExpand: Button;\r\n\r\n    private _btnMove: Button;\r\n\r\n    private _btnClose: Button;\r\n\r\n    private _acInput: AutoComplete<GodCommandItem<AcceptableParamType>>;\r\n\r\n    private _cnvParamInputContainer: mw.Canvas;\r\n\r\n    private _cnvParamInput: mw.Canvas;\r\n\r\n    private _btnRun: Button;\r\n\r\n    private _txtInfo: mw.TextBlock;\r\n\r\n    private _gameConfigRenderer: GodModGameConfigRenderer;\r\n\r\n    private _imgDrag: mw.Image;\r\n\r\n    private _cnvFloatWindow: mw.Canvas;\r\n\r\n    private _btnFloat: mw.Button;\r\n\r\n    private _imgExpandFloatBar: mw.Image;\r\n\r\n    private _imgShrinkFloatBar: mw.Image;\r\n\r\n    private _btnShow: Button;\r\n\r\n    private _godCommandItems: GodCommandItem<AcceptableParamType>[] = [];\r\n\r\n    private _currentChoose: GodCommandItem<AcceptableParamType>;\r\n\r\n    private _lastChoose: GodCommandItem<AcceptableParamType>;\r\n\r\n    private _currentInputComponent: GodModParamInputComponent<GodModInferParamForTransmit>;\r\n\r\n    private _paramCache: Map<GodCommandItem<AcceptableParamType>, GodModInferParamForTransmit> = new Map();\r\n\r\n    private _paramInputComponentCache: Map<AcceptableParamType, GodModParamInputComponent<GodModInferParamForTransmit>> = new Map();\r\n\r\n    private _dragSensitive: number;\r\n\r\n    private _dragStartTime: number;\r\n\r\n    private _mouseStartMosPos: mw.Vector2;\r\n\r\n    private _mouseStartCnvPos: mw.Vector2;\r\n\r\n    private _lastShowTipsTime = 0;\r\n\r\n    private _currentChooseConfigBase: ConfigBase<IElementBase> = undefined;\r\n\r\n    private _currentTouchBtnMoveLocation: mw.Vector2 = undefined;\r\n\r\n    private _floating: boolean = false;\r\n\r\n    private _expandFloat: boolean = false;\r\n\r\n    private _autoShrinkFloatTimer: number;\r\n\r\n    private _enterFloatDist: number;\r\n\r\n    private get btnMovePointerLocation() {\r\n        if (Gtk.useMouse) return mw.getMousePositionOnPlatform();\r\n        else return this._currentTouchBtnMoveLocation;\r\n    }\r\n\r\n    private _runCommandHandler: (label: string,\r\n                                 p: any,\r\n                                 autoDispatchToServer?: boolean) => void;\r\n\r\n//#region Lui Component\r\n    public static create(option?: GodModPanelOption): GodModPanel {\r\n        let godModPanel = new GodModPanel();\r\n\r\n        godModPanel._godCommandItems = option?.items ?? [];\r\n\r\n        if (option.zOrder !== undefined)\r\n            godModPanel.root.zOrder = option.zOrder;\r\n        godModPanel._dragSensitive = option?.dragSensitive ?? 0.25e3;\r\n        Gtk.setUiSize(godModPanel.root, GodModPanelSizeX, 140);\r\n\r\n        godModPanel._cnvMain = mw.Canvas.newObject(godModPanel.root, \"cnvMain\");\r\n        Gtk.setUiSize(godModPanel._cnvMain, GodModPanelSizeX, 140);\r\n\r\n        godModPanel._cnvController = mw.Canvas.newObject(godModPanel._cnvMain, \"cnvController\");\r\n        Gtk.setUiSize(godModPanel._cnvController, GodModPanelSizeX, 80);\r\n        Gtk.trySetVisibility(godModPanel._cnvController, true);\r\n\r\n        godModPanel._btnExpand = Button.create({\r\n            label: \"expand\",\r\n            size: {x: 220, y: 80},\r\n            padding: {top: 10, right: 20, bottom: 10, left: 0},\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            fontSize: 16,\r\n            corner: Property.Corner.TopRight | Property.Corner.Bottom,\r\n            icon: ExpandIcon.create(),\r\n        }).attach(godModPanel._cnvController);\r\n        Gtk.setUiPosition(godModPanel._btnExpand.root, 0, 0);\r\n        godModPanel._btnExpand.onClick.add(\r\n            () => godModPanel.showTips(\"打破常规的全新呼出方式. 敬请期待...\"),\r\n        );\r\n\r\n        godModPanel._btnMove = Button.create({\r\n            label: \"move\",\r\n            size: {x: 100, y: 80},\r\n            padding: {top: 10, right: 20, bottom: 10, left: 0},\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            fontSize: 16,\r\n            corner: Property.Corner.All,\r\n            icon: MoveIcon.create(),\r\n        }).attach(godModPanel._cnvController);\r\n        Gtk.setUiPosition(godModPanel._btnMove.root, godModPanel._btnExpand.root.size.x, 0);\r\n        godModPanel._btnMove.onClick.add(() => godModPanel.showTips(\"长按拖动\"));\r\n        godModPanel._btnMove.onPress.add(() => {\r\n            godModPanel._dragStartTime = Date.now();\r\n        });\r\n        godModPanel._btnMove.onRelease.add(() => {\r\n            godModPanel.playStopDragEffect();\r\n            godModPanel._dragStartTime = undefined;\r\n            godModPanel._mouseStartMosPos = undefined;\r\n            godModPanel._mouseStartCnvPos = undefined;\r\n        });\r\n        (godModPanel._btnMove[\"_btn\"][\"onTouchMoved\"] as\r\n            mw.Delegate<(absolutionPosition: mw.Vector2, pointEvent: mw.PointerEvent) => boolean>)\r\n            .bind((pos, evt) => {\r\n                if (godModPanel._dragStartTime === undefined ||\r\n                    Date.now() - godModPanel._dragStartTime < godModPanel._dragSensitive) {\r\n                    godModPanel._currentTouchBtnMoveLocation = undefined;\r\n                    return true;\r\n                }\r\n\r\n                godModPanel._currentTouchBtnMoveLocation = evt.screenSpacePosition;\r\n\r\n                return true;\r\n            });\r\n\r\n        godModPanel._btnClose = Button.create({\r\n            label: \"close\",\r\n            size: {x: 80, y: 80},\r\n            padding: {top: 10, right: 0, bottom: 10, left: 0},\r\n            color: {\r\n                primary: Color.Red,\r\n                secondary: Color.Red200,\r\n            },\r\n            fontSize: 16,\r\n            iconImage: \"287315\",\r\n            corner: Property.Corner.TopLeft | Property.Corner.Bottom,\r\n        }).attach(godModPanel._cnvController);\r\n        Gtk.setUiPosition(godModPanel._btnClose.root,\r\n            godModPanel._btnExpand.root.size.x + godModPanel._btnMove.root.size.x, 0);\r\n        godModPanel._btnClose.onClick.add((param) => {\r\n                Dialogue.create({\r\n                    title: \"确定要关闭吗？\",\r\n                    message: \"关闭意味着无法再次打开。\\n折叠可以点按悬浮窗再次打开。\",\r\n                    modal: true,\r\n                    feedbacks: [{\r\n                        label: \"关闭\",\r\n                        callback: () => godModPanel.destroy(),\r\n                        variant: \"warning\",\r\n                    }, {\r\n                        label: \"折叠\",\r\n                        callback: () => godModPanel._floating = true,\r\n                    }, {\r\n                        label: \"取消\",\r\n                    }],\r\n                })\r\n                    .attach(godModPanel.root);\r\n            },\r\n            undefined,\r\n            undefined,\r\n            godModPanel);\r\n\r\n        godModPanel._acInput = AutoComplete.create({\r\n            label: \"search commands\",\r\n            items: godModPanel._godCommandItems,\r\n            size: {x: GodModPanelSizeX, y: 60},\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            itemHeight: 40,\r\n            maxCount: 6,\r\n            fontSize: 16,\r\n            fontStyle: mw.UIFontGlyph.Light,\r\n            variant: \"filled\",\r\n            additionKey: [\r\n                {name: \"pinyin\", getFn: (item) => item.pinyin},\r\n            ],\r\n            iconRenderer: (item) => {\r\n                let variant: PlatformIconVariant;\r\n                if (!item.clientCmd && !item.serverCmd) {\r\n                    variant = undefined;\r\n                } else if (item.clientCmd && !item.serverCmd) {\r\n                    variant = \"client\";\r\n                } else if (!item.clientCmd && item.serverCmd) {\r\n                    variant = \"server\";\r\n                } else {\r\n                    variant = \"double\";\r\n                }\r\n\r\n                return PlatformIcon.create({\r\n                    size: {x: 24, y: 24},\r\n                    fontSize: 12,\r\n                    variant,\r\n                });\r\n            },\r\n            iconAlign: \"right\",\r\n            corner: Property.Corner.Top,\r\n            zOrder: 5,\r\n        }).attach(godModPanel._cnvMain);\r\n        Gtk.setUiPosition(godModPanel._acInput.root, 0, godModPanel._cnvController.size.y);\r\n        godModPanel._acInput.onClear.add(() => {\r\n            godModPanel.hideCnvParamInput();\r\n        });\r\n        godModPanel._acInput.onChoose.add(event => {\r\n            godModPanel._currentChoose = event.item;\r\n            godModPanel.showCnvParamInput();\r\n        });\r\n\r\n        godModPanel._cnvParamInputContainer = mw.Canvas.newObject(\r\n            godModPanel._cnvMain,\r\n            \"cnvParamInputContainer\");\r\n        Gtk.setUiPosition(godModPanel._cnvParamInputContainer, 0, 140);\r\n        Gtk.setUiSize(godModPanel._cnvParamInputContainer, GodModPanelSizeX, 1080);\r\n        Gtk.trySetVisibility(godModPanel._cnvParamInputContainer, true);\r\n        godModPanel._cnvParamInputContainer.clipEnable = true;\r\n\r\n        godModPanel._cnvParamInput = mw.Canvas.newObject(godModPanel._cnvParamInputContainer,\r\n            \"cnvParamInput\");\r\n        Gtk.setUiSize(godModPanel._cnvParamInput, GodModPanelSizeX, this.BtnRunSizeY + this.TxtInfoSizeY);\r\n\r\n        godModPanel._btnRun = Button.create({\r\n            label: \"Run\",\r\n            size: {x: GodModPanelSizeX, y: this.BtnRunSizeY},\r\n            color: {\r\n                primary: Color.Green,\r\n                secondary: Color.Green200,\r\n            },\r\n            fontSize: 24,\r\n            corner: Property.Corner.Top,\r\n        }).attach(godModPanel._cnvParamInput);\r\n        godModPanel._btnRun.onClick.add(_ => godModPanel.commit());\r\n\r\n        godModPanel._txtInfo = mw.TextBlock.newObject(godModPanel._cnvParamInput, \"txtInfo\");\r\n        Gtk.setUiPositionY(godModPanel._txtInfo, this.BtnRunSizeY);\r\n        Gtk.setUiSize(godModPanel._txtInfo, GodModPanelSizeX, this.TxtInfoSizeY);\r\n        godModPanel._txtInfo.fontSize = 16;\r\n        godModPanel._txtInfo.textAlign = mw.TextJustify.Left;\r\n        godModPanel._txtInfo.textHorizontalLayout = mw.UITextHorizontalLayout.NoClipping;\r\n        godModPanel._txtInfo.renderOpacity = 0;\r\n        godModPanel._txtInfo.setOutlineColorByHex(ColorUtil.colorHexWithAlpha(Color.Gray800, 1));\r\n        godModPanel._txtInfo.outlineSize = 2;\r\n\r\n        godModPanel._gameConfigRenderer = GodModGameConfigRenderer.create()\r\n            .attach(godModPanel._cnvParamInput);\r\n        Gtk.setUiPositionY(godModPanel._gameConfigRenderer.root,\r\n            this.BtnRunSizeY +\r\n            this.TxtInfoSizeY);\r\n\r\n        godModPanel._imgDrag = mw.Image.newObject(godModPanel._cnvMain, \"imgDrag\");\r\n        Gtk.setUiSize(godModPanel._imgDrag, GodModPanelSizeX, 150);\r\n        godModPanel._imgDrag.imageGuid = Lui.Asset.ImgRoundedRectangle;\r\n        godModPanel._imgDrag.imageDrawType = mw.SlateBrushDrawType.PixcelBox;\r\n        godModPanel._imgDrag.margin = new mw.Margin(\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.left,\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.top,\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.right,\r\n            Lui.Asset.ImgRoundedRectangleBoxMargin.bottom,\r\n        );\r\n        godModPanel._imgDrag.setImageColorByHex(ColorUtil.colorHexWithAlpha(Color.White, 0.5));\r\n        Gtk.trySetVisibility(godModPanel._imgDrag, false);\r\n\r\n        godModPanel._cnvFloatWindow = mw.Canvas.newObject(godModPanel.root, \"cnvFloatWindow\");\r\n        Gtk.setUiPosition(godModPanel._cnvFloatWindow, GodModPanelSizeX - 200, 0);\r\n        Gtk.setUiSize(godModPanel._cnvFloatWindow, 220, 80);\r\n        Gtk.trySetVisibility(godModPanel._cnvFloatWindow, false);\r\n\r\n        godModPanel._btnFloat = mw.Button.newObject(godModPanel._cnvFloatWindow, \"btnFloat\");\r\n        Gtk.setUiPosition(godModPanel._btnFloat, 200, 0);\r\n        Gtk.setUiSize(godModPanel._btnFloat, 20, 80);\r\n        godModPanel._btnFloat.normalImageDrawType = mw.SlateBrushDrawType.NoDrawType;\r\n        godModPanel._btnFloat.transitionEnable = false;\r\n        godModPanel._btnFloat.onClicked.add(() => {\r\n            godModPanel._expandFloat = !godModPanel._expandFloat;\r\n            if (godModPanel._expandFloat) {\r\n                godModPanel._autoShrinkFloatTimer = mw.setTimeout(() => {\r\n                        godModPanel._expandFloat = false;\r\n                        godModPanel._autoShrinkFloatTimer = undefined;\r\n                    },\r\n                    this.AutoShrinkFloatTime);\r\n            } else if (godModPanel._autoShrinkFloatTimer !== undefined) {\r\n                mw.clearTimeout(godModPanel._autoShrinkFloatTimer);\r\n                godModPanel._autoShrinkFloatTimer = undefined;\r\n            }\r\n        });\r\n\r\n        godModPanel._imgExpandFloatBar = mw.Image.newObject(godModPanel._cnvFloatWindow,\r\n            \"imgExpandFloatBar\");\r\n        Gtk.setUiPosition(godModPanel._imgExpandFloatBar, 165, 36);\r\n        Gtk.setUiSize(godModPanel._imgExpandFloatBar, 80, 8);\r\n        godModPanel._imgExpandFloatBar.imageGuid = \"318668\";\r\n        godModPanel._imgExpandFloatBar.setImageColorByHex(\r\n            Lui.Asset.ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Blue, 1));\r\n        godModPanel._imgExpandFloatBar.imageDrawType = mw.SlateBrushDrawType.Image;\r\n        godModPanel._imgExpandFloatBar.renderTransformAngle = 90;\r\n\r\n        godModPanel._imgShrinkFloatBar = mw.Image.newObject(godModPanel._cnvFloatWindow,\r\n            \"imgShrinkFloatBar\");\r\n        Gtk.setUiPosition(godModPanel._imgShrinkFloatBar, 200, 20);\r\n        Gtk.setUiSize(godModPanel._imgShrinkFloatBar, 20, 40);\r\n        godModPanel._imgShrinkFloatBar.imageGuid = \"120780\";\r\n        godModPanel._imgShrinkFloatBar.setImageColorByHex(\r\n            Lui.Asset.ColorUtil.colorHexWithAlpha(Lui.Asset.Color.Blue, 1));\r\n        godModPanel._imgShrinkFloatBar.imageDrawType = mw.SlateBrushDrawType.Image;\r\n        godModPanel._imgShrinkFloatBar.renderTransformPivot = new Vector2(0.25, 0.5);\r\n        Gtk.setUiScaleX(godModPanel._imgShrinkFloatBar, 0);\r\n\r\n        godModPanel._btnShow = Button.create({\r\n            size: {x: 200, y: 80},\r\n            label: \"ShowGodMod\",\r\n            color: {\r\n                primary: Color.Blue,\r\n                secondary: Color.Blue200,\r\n            },\r\n            fontSize: 18,\r\n            variant: \"contained\",\r\n        }).attach(godModPanel._cnvFloatWindow);\r\n        godModPanel._btnShow.onClick.add(() => {\r\n            godModPanel._floating = false;\r\n            if (godModPanel._autoShrinkFloatTimer !== undefined) {\r\n                mw.clearTimeout(godModPanel._autoShrinkFloatTimer);\r\n                godModPanel._autoShrinkFloatTimer = undefined;\r\n            }\r\n        });\r\n\r\n        godModPanel.onAttach.add(() => {\r\n            mw.TimeUtil.onEnterFrame.add(godModPanel.dragHandler);\r\n        });\r\n        godModPanel.onDetach.add(() => {\r\n            mw.TimeUtil.onEnterFrame.remove(godModPanel.dragHandler);\r\n        });\r\n        return godModPanel;\r\n    }\r\n\r\n    public static defaultOption() {\r\n        return undefined;\r\n    }\r\n\r\n    protected renderAnimHandler: (dt: number) => void = dt => {\r\n        if (this._txtInfo.renderOpacity > 0) {\r\n            const d = Date.now() - this._lastShowTipsTime;\r\n            if (d > GodModPanel.TipsShownTime) {\r\n                this._txtInfo.renderOpacity = Math.max(0,\r\n                    this._txtInfo.renderOpacity - dt / (GodModPanel.TipsFadeTime / 1000));\r\n            }\r\n        }\r\n\r\n        const currentY = this._cnvParamInput.position.y;\r\n        const shrinkSize = this._cnvParamInput.size.y - GodModPanel.TxtInfoSizeY;\r\n        if (this._currentChoose !== undefined && currentY < 0) {\r\n            Gtk.setUiPositionY(this._cnvParamInput,\r\n                Math.min(0, currentY + shrinkSize * dt / Interval.Fast));\r\n        }\r\n\r\n        if (this._currentChoose === undefined) {\r\n            if (currentY > -shrinkSize) {\r\n                Gtk.setUiPositionY(\r\n                    this._cnvParamInput,\r\n                    Math.max(-shrinkSize, currentY - shrinkSize * dt / Interval.Fast));\r\n            }\r\n        }\r\n\r\n        if (this._floating) {\r\n            if (this._cnvMain.renderOpacity > 0) {\r\n                this._cnvMain.renderOpacity = Math.max(0,\r\n                    this._cnvMain.renderOpacity - dt / Interval.Fast);\r\n            }\r\n            if (this.root.position.x > -GodModPanelSizeX) {\r\n                if (this._enterFloatDist === undefined) {\r\n                    this._enterFloatDist = this.root.position.x + GodModPanelSizeX;\r\n                }\r\n                Gtk.setUiPositionX(this.root,\r\n                    Math.max(-GodModPanelSizeX,\r\n                        this.root.position.x - this._enterFloatDist * dt / Interval.Fast));\r\n            } else if (!this._cnvFloatWindow.visible) {\r\n                Gtk.setUiPositionX(this._cnvFloatWindow, GodModPanelSizeX);\r\n                Gtk.trySetVisibility(this._cnvFloatWindow, true);\r\n\r\n                this._enterFloatDist = undefined;\r\n                this._expandFloat = true;\r\n                Gtk.setUiScaleX(this._imgShrinkFloatBar, 1);\r\n                this._imgExpandFloatBar.renderOpacity = 0;\r\n\r\n                this._autoShrinkFloatTimer = mw.setTimeout(() => {\r\n                    this._expandFloat = false;\r\n                    this._autoShrinkFloatTimer = undefined;\r\n                }, 1e3);\r\n            }\r\n        } else {\r\n            if (this._cnvFloatWindow.visible) {\r\n                Gtk.trySetVisibility(this._cnvFloatWindow, false);\r\n            }\r\n            if (this._cnvMain.renderOpacity < 1) {\r\n                this._cnvMain.renderOpacity = Math.min(1,\r\n                    this._cnvMain.renderOpacity + dt / Interval.Fast);\r\n            }\r\n            if (this.root.position.x < 0) {\r\n                Gtk.setUiPositionX(this.root,\r\n                    Math.min(0,\r\n                        this.root.position.x + GodModPanelSizeX * dt / Interval.Fast));\r\n            }\r\n        }\r\n\r\n        if (this._expandFloat) {\r\n            if (this._cnvFloatWindow.position.x < GodModPanelSizeX) {\r\n                Gtk.setUiPositionX(this._cnvFloatWindow,\r\n                    Math.min(GodModPanelSizeX,\r\n                        this._cnvFloatWindow.position.x + GodModPanelSizeX * dt / Interval.Fast));\r\n            }\r\n            if (this._imgShrinkFloatBar.renderScale.x < 1) {\r\n                Gtk.setUiScaleX(this._imgShrinkFloatBar,\r\n                    Math.min(1, this._imgShrinkFloatBar.renderScale.x + dt / Interval.Fast));\r\n                this._imgExpandFloatBar.renderOpacity = Math.max(0,\r\n                    this._imgExpandFloatBar.renderOpacity - dt / Interval.Fast);\r\n            }\r\n        } else {\r\n            if (this._cnvFloatWindow.position.x > GodModPanelSizeX - 200) {\r\n                Gtk.setUiPositionX(this._cnvFloatWindow,\r\n                    Math.max(GodModPanelSizeX - 200,\r\n                        this._cnvFloatWindow.position.x - GodModPanelSizeX * dt / Interval.Fast));\r\n            }\r\n            if (this._imgShrinkFloatBar.renderScale.x > 0) {\r\n                Gtk.setUiScaleX(this._imgShrinkFloatBar,\r\n                    Math.max(0, this._imgShrinkFloatBar.renderScale.x - dt / Interval.Fast));\r\n                this._imgExpandFloatBar.renderOpacity = Math.min(1,\r\n                    this._imgExpandFloatBar.renderOpacity + dt / Interval.Fast);\r\n            }\r\n        }\r\n    };\r\n\r\n    protected destruct(): void {\r\n        super.destroy();\r\n    }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    public registerCommandHandler(handler: (label: string,\r\n                                            p: any,\r\n                                            autoDispatchToServer?: boolean) => void): this {\r\n        this._runCommandHandler = handler;\r\n        return this;\r\n    }\r\n\r\n    private showCnvParamInput() {\r\n        if (this._lastChoose === this._currentChoose) return;\r\n        if (this._lastChoose) {\r\n            this._paramCache.set(this._lastChoose, this._currentInputComponent?.getParam() ?? undefined);\r\n        }\r\n        if (!this._btnRun.enable) this._btnRun.enable = true;\r\n\r\n        this._lastChoose = this._currentChoose;\r\n        const type = this._currentChoose.paramType;\r\n\r\n        this._currentInputComponent?.detach();\r\n        this._btnRun.detach();\r\n        this._txtInfo.removeObject();\r\n        this._gameConfigRenderer.detach();\r\n        let input: GodModParamInputComponent<GodModInferParamForTransmit>;\r\n\r\n        if (type !== \"void\") {\r\n            input = this._paramInputComponentCache.get(type);\r\n            if (!input) {\r\n                switch (type) {\r\n                    case \"integer\":\r\n                        input = GodModIntegerParamInput.create();\r\n                        break;\r\n                    case \"number\":\r\n                        input = GodModNumberParamInput.create();\r\n                        break;\r\n                    case \"vector\":\r\n                        input = GodModVectorParamInput.create();\r\n                        break;\r\n                    case \"string\":\r\n                    default:\r\n                        if (typeof type === \"object\") {\r\n                            if (Gtk.is<ConfigBase<IElementBase>>(type, \"getElement\")) {\r\n                                input = GodModGameConfigParamInput.create();\r\n                                input.onCommit.add((param) => {\r\n                                    const id = Number(param.text);\r\n                                    const config = this._currentChooseConfigBase?.getElement(id);\r\n                                    this._gameConfigRenderer.render(config);\r\n                                });\r\n                            } else {\r\n                                input = GodModEnumParamInput.create();\r\n                            }\r\n                        } else {\r\n                            input = GodModStringParamInput.create();\r\n                        }\r\n                        break;\r\n                }\r\n                input.onCommit.add(() => {\r\n                    if (this._currentInputComponent === input) {\r\n                        this._btnRun.enable = input.validated.result;\r\n                    }\r\n                });\r\n                this._paramInputComponentCache.set(type, input);\r\n            }\r\n\r\n            if (input) {\r\n                input.setValidator(this._currentChoose.paramOption?.validator);\r\n                input.setParam(this._paramCache.get(this._currentChoose));\r\n            }\r\n\r\n            this._gameConfigRenderer.show = false;\r\n            if (typeof type === \"object\") {\r\n                if (Gtk.is<ConfigBase<IElementBase>>(type, \"getElement\")) {\r\n                    this._gameConfigRenderer.show = true;\r\n                    this._currentChooseConfigBase = type;\r\n                } else {\r\n                    (input as GodModEnumParamInput<any>).setEnumObj(type);\r\n                }\r\n            }\r\n        }\r\n\r\n        const paramSizeY = (input?.root?.size.y ?? 0);\r\n        const paramAreaSizeY = paramSizeY + GodModPanel.BtnRunSizeY + GodModPanel.TxtInfoSizeY;\r\n\r\n        Gtk.setUiSizeY(this._cnvParamInput,\r\n            paramAreaSizeY);\r\n        Gtk.setUiPositionY(this._btnRun.root, paramSizeY);\r\n        Gtk.setUiPositionY(this._txtInfo,\r\n            paramSizeY +\r\n            GodModPanel.BtnRunSizeY);\r\n        Gtk.setUiPositionY(this._gameConfigRenderer.root,\r\n            paramSizeY +\r\n            GodModPanel.BtnRunSizeY +\r\n            GodModPanel.TxtInfoSizeY);\r\n\r\n        this._currentInputComponent = input?.attach(this._cnvParamInput) ?? undefined;\r\n        this._btnRun.attach(this._cnvParamInput);\r\n        this._cnvParamInput.addChild(this._txtInfo);\r\n        this._gameConfigRenderer.attach(this._cnvParamInput);\r\n    }\r\n\r\n    private hideCnvParamInput() {\r\n        if (this._lastChoose) {\r\n            this._paramCache.set(this._lastChoose, this._currentInputComponent?.getParam() ?? undefined);\r\n        }\r\n        this._currentChoose = undefined;\r\n        this._currentChooseConfigBase = undefined;\r\n        this._gameConfigRenderer.render();\r\n        this._gameConfigRenderer.show = false;\r\n    }\r\n\r\n    private commit() {\r\n        if (this._currentInputComponent && !this._currentInputComponent.validated.result) {\r\n            this.showWarning(this._currentInputComponent.validated.reason);\r\n            this._btnRun.enable = false;\r\n            return;\r\n        }\r\n\r\n        const param = this._currentInputComponent?.getParam() ?? undefined;\r\n\r\n        let command = this._currentChoose;\r\n        this.showRunning();\r\n        this._runCommandHandler?.(command.label, param);\r\n    }\r\n\r\n    private dragHandler = () => {\r\n        if (this._dragStartTime === undefined ||\r\n            Date.now() - this._dragStartTime < this._dragSensitive) return;\r\n\r\n        const viewPortCanvas = mw.UIService.canvas;\r\n\r\n        let currMouseAbsolutePos = this.btnMovePointerLocation;\r\n        if (!currMouseAbsolutePos) return;\r\n        if (this._mouseStartMosPos === undefined) {\r\n            this._mouseStartMosPos = mw.absoluteToLocal(\r\n                viewPortCanvas.cachedGeometry,\r\n                this.btnMovePointerLocation);\r\n            this._mouseStartCnvPos = this.root.position.clone();\r\n            this.playStartDragEffect();\r\n        } else {\r\n            let currMouseRelativePos = mw.absoluteToLocal(\r\n                viewPortCanvas.cachedGeometry,\r\n                currMouseAbsolutePos);\r\n            Gtk.setUiPosition(\r\n                this.root,\r\n                this._mouseStartCnvPos.x + currMouseRelativePos.x - this._mouseStartMosPos.x,\r\n                this._mouseStartCnvPos.y + currMouseRelativePos.y - this._mouseStartMosPos.y);\r\n        }\r\n    };\r\n\r\n    private playStartDragEffect() {\r\n        Gtk.setUiScale(this.root, 1.1, 1.1);\r\n        Gtk.trySetVisibility(this._imgDrag, true);\r\n    }\r\n\r\n    private playStopDragEffect() {\r\n        Gtk.setUiScale(this.root, 1, 1);\r\n        Gtk.trySetVisibility(this._imgDrag, false);\r\n\r\n        if (this.root.position.x < 0) {\r\n            Gtk.setUiPositionX(this.root, 0);\r\n        }\r\n        if (this.root.position.y < 0) {\r\n            Gtk.setUiPositionY(this.root, 0);\r\n        }\r\n        if (this.root.position.x > mw.UIService.canvas.size.x - this.root.size.x) {\r\n            Gtk.setUiPositionX(this.root, mw.UIService.canvas.size.x - this.root.size.x);\r\n        }\r\n        if (this.root.position.y > mw.UIService.canvas.size.y - this.root.size.y) {\r\n            Gtk.setUiPositionY(this.root, mw.UIService.canvas.size.y - this.root.size.y);\r\n        }\r\n    }\r\n\r\n    private showTips(text: string, color?: string) {\r\n        this._txtInfo.setFontColorByHex(ColorUtil.colorHexWithAlpha(color ?? Color.Blue, 1));\r\n        this._txtInfo.text = text;\r\n        this._lastShowTipsTime = Date.now();\r\n        this._txtInfo.renderOpacity = 1;\r\n    }\r\n\r\n    private showWarning(text: string) {\r\n        this.showTips(text, Color.Red);\r\n    }\r\n\r\n    public showSuccess() {\r\n        this.showTips(\"Worked!\", Color.Green);\r\n    }\r\n\r\n    public showRunning() {\r\n        this.showTips(\"Running...\", Color.Blue);\r\n    }\r\n\r\n    public showError() {\r\n        this.showTips(\"Error!\", Color.Red);\r\n    }\r\n\r\n//#region CallBack\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n}\r\n\r\nexport interface GodModPanelOption {\r\n    items: GodCommandItem<AcceptableParamType>[];\r\n\r\n    /**\r\n     * 拖动敏度. ms\r\n     * @desc 该时间后触发拖动.\r\n     */\r\n    dragSensitive?: number;\r\n\r\n    zOrder?: number;\r\n}"],"names":[],"mappings":"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"}