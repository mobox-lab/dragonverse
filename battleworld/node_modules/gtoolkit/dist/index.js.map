{"version":3,"file":"index.js","sources":["../GToolkit.ts"],"sourcesContent":["/**\r\n * GToolkit.\r\n * General Toolkit deep binding MW Ts.\r\n * @desc ---\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author G.S.C. Gtk Standards Committee. Gtk 标准委员会.\r\n * @author LviatYi\r\n * @author minjia.zhang\r\n * @author zewei.zhang\r\n * @author yuanming.hu\r\n * @see https://github.com/LviatYi/MetaWorldNPT/tree/main/MetaWorldNPT/JavaScripts/util\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nclass GToolkit {\r\n//#region Pure Js\r\n//#region Constant\r\n    /**\r\n     * 角度限制常数.\r\n     * @private\r\n     */\r\n    private static readonly DEFAULT_ANGLE_CLAMP = [-180, 180];\r\n\r\n    /**\r\n     * 圆周角.\r\n     * @private\r\n     */\r\n    private static readonly CIRCLE_ANGLE = 360;\r\n\r\n    /**\r\n     * 简略精度.\r\n     * @private\r\n     */\r\n    private static readonly SIMPLE_EPSILON = 1e-6;\r\n\r\n    /**\r\n     * 全高清分辨率.\r\n     * @private\r\n     */\r\n    private static readonly FULL_HD: IPoint2 = {x: 1920, y: 1080};\r\n\r\n    /**\r\n     * 全高清分辨率比例.\r\n     * @private\r\n     */\r\n    private static readonly FULL_HD_RATIO: number = GToolkit.FULL_HD.x / GToolkit.FULL_HD.y;\r\n\r\n    /**\r\n     * 1 天 24 小时.\r\n     * @private\r\n     */\r\n    private static readonly HourInDay = 24;\r\n\r\n    /**\r\n     * 1 小时 60 分钟.\r\n     * @private\r\n     */\r\n    private static readonly MinuteInHour = 60;\r\n\r\n    /**\r\n     * 1 分钟 60 秒.\r\n     * @private\r\n     */\r\n    private static readonly SecondInMinute = 60;\r\n\r\n    /**\r\n     * 1 秒 1000 毫秒.\r\n     * @private\r\n     */\r\n    private static readonly MillisecondInSecond = 1e3;\r\n\r\n    /**\r\n     * 默认 随机函数.\r\n     * @type {() => number}\r\n     */\r\n    public defaultRandomFunc: () => number = Math.random;\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Member\r\n\r\n    private _characterDescriptionLockers: Set<string> = new Set();\r\n\r\n    private _patchHandlerPool: Map<Method, PatchInfo> = new Map();\r\n\r\n    private _waitHandlerPool: Map<Method, WaitInfo> = new Map();\r\n\r\n    private _globalOnlyOnBlurDelegate: Delegate.SimpleDelegate<void> = undefined;\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    /**\r\n     * Is Primitive.\r\n     * @param value\r\n     */\r\n    public isPrimitiveType<T>(value: T): value is T extends string | number | boolean | symbol ? T : never {\r\n        return typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\" || typeof value === \"symbol\";\r\n    }\r\n\r\n    /**\r\n     * Is number.\r\n     * @param value\r\n     */\r\n    public isNumber<T>(value: T): value is T extends number ? T : never {\r\n        return typeof value === \"number\";\r\n    }\r\n\r\n    /**\r\n     * Is string.\r\n     * @param value\r\n     */\r\n    public isString<T>(value: T): value is T extends string ? T : never {\r\n        return typeof value === \"string\";\r\n    }\r\n\r\n    /**\r\n     * Is boolean.\r\n     * @param value\r\n     */\r\n    public isBoolean<T>(value: T): value is T extends boolean ? T : never {\r\n        return typeof value === \"boolean\";\r\n    }\r\n\r\n    /**\r\n     * Is object.\r\n     * @param value\r\n     */\r\n    public isObject<T>(value: T): value is T extends object ? T : never {\r\n        return typeof value === \"object\";\r\n    }\r\n\r\n    /**\r\n     * 对 instance 进行强制类型推断.\r\n     * @param instance 对象\r\n     * @param method 对象方法名\r\n     * @returns boolean\r\n     */\r\n    public is<T extends object>(instance: object, method: string | ((instance: object) => boolean)): instance is T {\r\n        if (!instance) return false;\r\n        if (typeof method === \"string\") {\r\n            return method in instance;\r\n        }\r\n\r\n        return method(instance);\r\n    }\r\n\r\n    /**\r\n     * Ts 枚举值.\r\n     * traverse values in enum.\r\n     * @param {T} enumType\r\n     * @return {ValueTypeInEnum<T>[]}\r\n     */\r\n    public enumVals<T>(enumType: T): ValueTypeInEnum<T>[] {\r\n        return Object\r\n            .entries(enumType)\r\n            .filter(([key, value]) => isNaN(Number(key)))\r\n            .map(([key, value]) => value) as ValueTypeInEnum<T>[];\r\n    }\r\n\r\n    /**\r\n     * is the array or string empty.\r\n     * define empty is undefined or null or [\"\"].\r\n     * @param textOrArray str or array.\r\n     */\r\n    public isNullOrEmpty(textOrArray: string | unknown[]): boolean {\r\n        return this.isNullOrUndefined(textOrArray) ||\r\n            (typeof textOrArray === \"string\" ? (textOrArray === \"\") : (textOrArray.length === 0));\r\n    }\r\n\r\n    /**\r\n     * is the value null or undefined.\r\n     * @param value\r\n     */\r\n    public isNullOrUndefined(value: unknown) {\r\n        return value == undefined;\r\n    }\r\n\r\n    /**\r\n     * return the safe index.\r\n     * @param index\r\n     * @param arr\r\n     * @param safeStrategy 索引越界时的安全策略.\r\n     *      - \"cut\" default. 截断至合法索引.\r\n     *      - \"cycle\" 循环. 非法时对值取余.\r\n     * @return 当数组为空时返回 -1. 否则按策略返回合法索引.\r\n     */\r\n    public safeIndex(index: number, arr: unknown[], safeStrategy: \"cut\" | \"cycle\" = \"cut\"): number {\r\n        if (this.isNullOrEmpty(arr)) return -1;\r\n        if (index < 0) switch (safeStrategy) {\r\n            case \"cycle\":\r\n                return (arr.length + index % arr.length) % arr.length;\r\n            case \"cut\":\r\n            default:\r\n                return 0;\r\n        }\r\n        if (index >= arr.length) switch (safeStrategy) {\r\n            case \"cycle\":\r\n                return index % arr.length;\r\n            case \"cut\":\r\n            default:\r\n                return arr.length - 1;\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    /**\r\n     * return item by index who maybe unsafe.\r\n     * @param index\r\n     * @param arr\r\n     * @param safeStrategy 索引越界时的安全策略.\r\n     *      - \"cut\" default. 截断至合法索引.\r\n     *      - \"cycle\" 循环. 非法时对值取余.\r\n     * @return 当数组为空时返回 null. 否则按策略返回合法元素.\r\n     */\r\n    public safeIndexItem<T>(index: number, arr: T[], safeStrategy: \"cut\" | \"cycle\" = \"cut\"): T {\r\n        let safeIndex = this.safeIndex(index, arr, safeStrategy);\r\n        return safeIndex === -1 ? null : arr[safeIndex];\r\n    }\r\n\r\n    /**\r\n     * remove item from array.\r\n     * @param array\r\n     * @param item\r\n     * @param {boolean} holdOrder hold order after remove.\r\n     */\r\n    public remove<T>(array: T[], item: T, holdOrder: boolean = true): boolean {\r\n        if (!array) return;\r\n        const index = array.indexOf(item);\r\n        if (index > -1) {\r\n            if (holdOrder) {\r\n                array.splice(index, 1);\r\n            } else {\r\n                array[index] = array[array.length - 1];\r\n                array.pop();\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * remove item from array by index.\r\n     * @desc sequence not maintained.\r\n     * @param {T[]} array\r\n     * @param {number} index\r\n     */\r\n    public removeByIndex(array: unknown[], index: number): boolean {\r\n        if (index < 0 || index > array.length) {\r\n            return false;\r\n        }\r\n        array[index] = array[array.length - 1];\r\n        --array.length;\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * build an advanced switch.\r\n     */\r\n    public switch(): Switcher {\r\n        return new Switcher();\r\n    }\r\n\r\n    /**\r\n     * fold data.\r\n     * @param data\r\n     * @param foldCount\r\n     * @param func\r\n     */\r\n    public fold<UF, F>(data: UF[], foldCount: number, func: (data: UF[]) => F): F[] {\r\n        const result: F[] = [];\r\n        for (let i = 0; i < data.length; i += foldCount) {\r\n            result.push(func(data.slice(i, i + foldCount)));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * unfold data.\r\n     * @param data\r\n     * @param foldCount\r\n     * @param func\r\n     */\r\n    public unfold<F, UF>(data: F[], foldCount: number, func: (data: F) => UF[]): UF[] {\r\n        const result: UF[] = [];\r\n\r\n        for (const element of data) {\r\n            result.push(...func(element));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * confirm get value from map with key.\r\n     * @param {Map<K, V>} map\r\n     * @param {K} key\r\n     * @param {()=>V} generate\r\n     * @return {V}\r\n     */\r\n    public tryGet<K, V>(map: Map<K, V>, key: K, generate: Expression<V> | V): V {\r\n        let result = map.get(key);\r\n        if (result === undefined) {\r\n            result = typeof generate === \"function\" ?\r\n                (generate as Expression<V>)() :\r\n                generate;\r\n            map.set(key, result);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * do callback once when predicate return true.\r\n     * @param predicate\r\n     * @param callback\r\n     * @param interval test predicate interval. ms.\r\n     *      - 100 default.\r\n     * @param instant test predicate at once.\r\n     * @param timeout timeout. stop predicate test after timeout. ms.\r\n     *      - 0 default. no timeout.\r\n     * @param onError on error callback.\r\n     * @param onTimeout on timeout callback.\r\n     * @return interval hold id.\r\n     */\r\n    public doWhenTrue(predicate: () => boolean,\r\n                      callback: () => void,\r\n                      interval: number = 100,\r\n                      instant: boolean = true,\r\n                      timeout: number = 0,\r\n                      onError: Expression<void> = undefined,\r\n                      onTimeout: Expression<void> = undefined): number | null {\r\n        const startTime = Date.now();\r\n        let holdId = null;\r\n        const callbackWithCatch = () => {\r\n            try {\r\n                callback();\r\n            } catch (e) {\r\n                try {\r\n                    onError && onError();\r\n                } catch (e) {\r\n                    mw.console.error(\"GToolkit: error occurs in onError callback.\");\r\n                    mw.console.error(e);\r\n                    mw.console.error(e.stack);\r\n                }\r\n            } finally {\r\n                holdId && clearInterval(holdId);\r\n            }\r\n        };\r\n        if (instant && predicate()) {\r\n            callbackWithCatch();\r\n            return null;\r\n        }\r\n\r\n        holdId = mw.setInterval(() => {\r\n                if (timeout > 0 && Date.now() - startTime > timeout) {\r\n                    clearInterval(holdId);\r\n                    onTimeout && onTimeout();\r\n                    return;\r\n                }\r\n                if (!predicate()) return;\r\n                callbackWithCatch();\r\n            },\r\n            interval,\r\n        );\r\n\r\n        return holdId;\r\n    }\r\n\r\n    /**\r\n     * do callback persistently until predicate return true.\r\n     * @param predicate\r\n     * @param callback\r\n     * @param interval ms. test predicate interval.\r\n     *      100 default.\r\n     * @param instant test predicate at once.\r\n     * @param timeout timeout. stop predicate test after timeout. ms.\r\n     *      - 0 default. no timeout.\r\n     * @param onError on error callback.\r\n     * @param onTimeout on timeout callback.\r\n     * @return interval hold id.\r\n     */\r\n    public doUntilTrue(predicate: () => boolean,\r\n                       callback: () => void,\r\n                       interval: number = 100,\r\n                       instant: boolean = true,\r\n                       timeout: number = 0,\r\n                       onError: Expression<void> = undefined,\r\n                       onTimeout: Expression<void> = undefined): number | null {\r\n        const startTime = Date.now();\r\n        let holdId = null;\r\n        const callbackWithCatch = () => {\r\n            try {\r\n                callback();\r\n            } catch (e) {\r\n                try {\r\n                    onError && onError();\r\n                } catch (e) {\r\n                    mw.console.error(\"GToolkit: error occurs in onError callback.\");\r\n                    mw.console.error(e);\r\n                    mw.console.error(e.stack);\r\n                }\r\n            } finally {\r\n                holdId && clearInterval(holdId);\r\n            }\r\n        };\r\n        if (instant) {\r\n            if (predicate()) return null;\r\n            else callbackWithCatch();\r\n        }\r\n\r\n        holdId = mw.setInterval(() => {\r\n                if (timeout > 0 && Date.now() - startTime > timeout) {\r\n                    clearInterval(holdId);\r\n                    onTimeout && onTimeout();\r\n                    return;\r\n                }\r\n                if (predicate()) {\r\n                    clearInterval(holdId);\r\n                    return;\r\n                }\r\n                callbackWithCatch();\r\n            },\r\n            interval,\r\n        );\r\n\r\n        return holdId;\r\n    }\r\n\r\n    /**\r\n     * do a delayed batch operation who wait for data.\r\n     * @param {TArg} data\r\n     * @param {(data: TArg[]) => void} patchCallback\r\n     *      - do not use an anonymous function here.\r\n     * @param {number} waitTime=undefined 󰅐wait time. ms.\r\n     *      if first register the patchCallback, the waitTime will be 100 ms.\r\n     *      else the waitTime will use last waitTime.\r\n     * @param {boolean} reTouch=false reclock when data added.\r\n     *      it allows a single instance to store and manage multiple data batch queues based on different tags.\r\n     * @param {boolean} instantly=false do patch when instantly.\r\n     * @return {number} timer id.\r\n     */\r\n    public patchDo<TArg>(data: TArg,\r\n                         patchCallback: (data: TArg[]) => void,\r\n                         waitTime: number = undefined,\r\n                         reTouch: boolean = false,\r\n                         instantly: boolean = false): number | undefined {\r\n        let existPatch = this.tryGet(\r\n            this._patchHandlerPool,\r\n            patchCallback,\r\n            () => ({\r\n                timerId: undefined,\r\n                data: [],\r\n                delayDo: () => {\r\n                    if (existPatch.timerId !== undefined) {\r\n                        mw.clearTimeout(existPatch.timerId);\r\n                    }\r\n                    this._patchHandlerPool.delete(patchCallback);\r\n                    patchCallback(existPatch.data as TArg[]);\r\n                },\r\n                lastWaitDuration: waitTime,\r\n            }));\r\n\r\n        existPatch.data.push(data);\r\n        if (instantly) {\r\n            existPatch.delayDo();\r\n        } else if (existPatch.timerId === undefined || reTouch) {\r\n            if (existPatch.timerId !== undefined) mw.clearTimeout(existPatch.timerId);\r\n            if (waitTime !== undefined) existPatch.lastWaitDuration = waitTime;\r\n            existPatch.timerId = mw.setTimeout(\r\n                existPatch.delayDo,\r\n                existPatch.lastWaitDuration ?? 0.1e3);\r\n        }\r\n\r\n        return existPatch.timerId;\r\n    }\r\n\r\n    /**\r\n     * do a delayed batch operation who wait for data.\r\n     * @param {TArg} data\r\n     * @param {(data: TArg) => void} waitCallback\r\n     *      - do not use an anonymous function here.\r\n     * @param {number} waitTime=undefined 󰅐wait time. ms.\r\n     *      if first register the patchCallback, the waitTime will be 100 ms.\r\n     *      else the waitTime will use last waitTime.\r\n     * @param {boolean} reTouch=true reclock when data added.\r\n     *      it allows a single instance to store and manage multiple data batch queues based on different tags.\r\n     * @param {boolean} instantly=false do patch when instantly.\r\n     * @return {number} timer id.\r\n     */\r\n    public waitDo<TArg>(data: TArg,\r\n                        waitCallback: (data: TArg) => void,\r\n                        waitTime: number = undefined,\r\n                        reTouch: boolean = true,\r\n                        instantly: boolean = false): number | undefined {\r\n        let existPatch = this.tryGet(\r\n            this._waitHandlerPool,\r\n            waitCallback,\r\n            () => ({\r\n                timerId: undefined,\r\n                data: undefined,\r\n                delayDo: () => {\r\n                    if (existPatch.timerId !== undefined) {\r\n                        mw.clearTimeout(existPatch.timerId);\r\n                    }\r\n                    this._waitHandlerPool.delete(waitCallback);\r\n                    waitCallback(existPatch.data as TArg);\r\n                },\r\n                lastWaitDuration: waitTime,\r\n            }));\r\n\r\n        existPatch.data = data;\r\n        if (instantly) {\r\n            existPatch.delayDo();\r\n        } else if (existPatch.timerId === undefined || reTouch) {\r\n            if (existPatch.timerId !== undefined) mw.clearTimeout(existPatch.timerId);\r\n            if (waitTime !== undefined) existPatch.lastWaitDuration = waitTime;\r\n            existPatch.timerId = mw.setTimeout(\r\n                existPatch.delayDo,\r\n                existPatch.lastWaitDuration ?? 1e3);\r\n        }\r\n\r\n        return existPatch.timerId;\r\n    }\r\n\r\n    /**\r\n     * whether the two times are equal.\r\n     * @param {number} lhs\r\n     * @param {number} rhs\r\n     * @param {GtkTypes.TimeFormatDimensionFlagsLike} precision\r\n     * @return {boolean}\r\n     */\r\n    public isSameTime(lhs: number,\r\n                      rhs: number,\r\n                      precision: GtkTypes.TimeFormatDimensionFlagsLike = GtkTypes.Tf.D) {\r\n        if (precision === GtkTypes.Tf.Ms) return lhs === rhs;\r\n        let lhsDate = new Date(lhs);\r\n        let rhsDate = new Date(rhs);\r\n        switch (precision) {\r\n            case GtkTypes.Tf.Y:\r\n                return lhsDate.getFullYear() === rhsDate.getFullYear();\r\n            case GtkTypes.Tf.Mon:\r\n                return lhsDate.getFullYear() === rhsDate.getFullYear() &&\r\n                    lhsDate.getMonth() === rhsDate.getMonth();\r\n            case GtkTypes.Tf.D:\r\n                return lhsDate.getFullYear() === rhsDate.getFullYear() &&\r\n                    lhsDate.getMonth() === rhsDate.getMonth() &&\r\n                    lhsDate.getDate() === rhsDate.getDate();\r\n            case GtkTypes.Tf.H:\r\n                return lhsDate.getFullYear() === rhsDate.getFullYear() &&\r\n                    lhsDate.getMonth() === rhsDate.getMonth() &&\r\n                    lhsDate.getDate() === rhsDate.getDate() &&\r\n                    lhsDate.getHours() === rhsDate.getHours();\r\n            case GtkTypes.Tf.M:\r\n                return lhsDate.getFullYear() === rhsDate.getFullYear() &&\r\n                    lhsDate.getMonth() === rhsDate.getMonth() &&\r\n                    lhsDate.getDate() === rhsDate.getDate() &&\r\n                    lhsDate.getHours() === rhsDate.getHours() &&\r\n                    lhsDate.getMinutes() === rhsDate.getMinutes();\r\n            case GtkTypes.Tf.S:\r\n                return lhsDate.getFullYear() === rhsDate.getFullYear() &&\r\n                    lhsDate.getMonth() === rhsDate.getMonth() &&\r\n                    lhsDate.getDate() === rhsDate.getDate() &&\r\n                    lhsDate.getHours() === rhsDate.getHours() &&\r\n                    lhsDate.getMinutes() === rhsDate.getMinutes() &&\r\n                    lhsDate.getSeconds() === rhsDate.getSeconds();\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取所有成员 key.\r\n     * @param obj 指定实例.\r\n     * @param exceptConstructor 是否 排除构造函数.\r\n     * @param exceptObject 是否 排除 Js Object.\r\n     */\r\n    public getAllMember(obj: object,\r\n                        exceptConstructor: boolean = true,\r\n                        exceptObject: boolean = true): string[] {\r\n        const props: string[] = [];\r\n        let focus = obj;\r\n        do {\r\n            if (exceptObject && focus === Object.prototype) {\r\n                break;\r\n            }\r\n            props.push(...Object.getOwnPropertyNames(focus).filter(item => !(exceptConstructor && item === \"constructor\")));\r\n        }\r\n        while (focus = Object.getPrototypeOf(focus));\r\n\r\n        return props;\r\n    }\r\n\r\n    /**\r\n     * angle to radius.\r\n     * @param angle\r\n     */\r\n    public radius(angle: number): number {\r\n        return angle / 180 * Math.PI;\r\n    }\r\n\r\n    /**\r\n     * radius to angle.\r\n     * @param radius\r\n     */\r\n    public angle(radius: number): number {\r\n        return radius / Math.PI * 180;\r\n    }\r\n\r\n    /**\r\n     * random in range [min,max).\r\n     * @param min default 0.\r\n     * @param max default min + 1.\r\n     * @param integer return a integer.\r\n     */\r\n    public random(min: number = undefined, max: number = undefined, integer: boolean = false): number {\r\n        if (min === undefined) {\r\n            min = 0;\r\n        }\r\n        if (max === undefined) {\r\n            max = min + 1;\r\n        }\r\n\r\n        let result = Math.random() * (max - min) + min;\r\n\r\n        return integer ? result | 0 : result;\r\n    }\r\n\r\n    /**\r\n     * random with weight.\r\n     * @param weight\r\n     * @param total total weight. add last weight as total-sum(weight)\r\n     * @return number [0,weight.length) .\r\n     */\r\n    public randomWeight(weight: number[], total: number = undefined): number {\r\n        const stepWeight = new Array<number>(weight.length);\r\n        for (let i = 0; i < weight.length; i++) {\r\n            stepWeight[i] = (i === 0 ? 0 : stepWeight[i - 1]) + weight[i];\r\n        }\r\n        if (total !== undefined && total > stepWeight[stepWeight.length - 1]) {\r\n            stepWeight.push(total);\r\n        }\r\n\r\n        const r = this.random(0, stepWeight[stepWeight.length - 1]);\r\n        let start: number = 0;\r\n        let end = stepWeight.length;\r\n        while (start < end) {\r\n            let mid = ((start + end) / 2) | 0;\r\n            if (r < stepWeight[mid]) {\r\n                end = mid;\r\n            } else {\r\n                start = mid + 1;\r\n            }\r\n        }\r\n        return start;\r\n    }\r\n\r\n    /**\r\n     * random in array.\r\n     * return null when array invalid or length is zero.\r\n     * @param array\r\n     */\r\n    public randomArrayItem<T>(array: Array<T>): T | null {\r\n        if (!array || array.length === 0) return null;\r\n        return array[this.random(0, array.length, true)];\r\n    }\r\n\r\n    /**\r\n     * random shuffle the order from 0 to count.\r\n     * Fisher–Yates.\r\n     * @param count\r\n     */\r\n    public randomShuffleOrder(count: number): number[] {\r\n        const result = new Array<number>(count);\r\n        for (let i = 0; i < count; i++) {\r\n            result[i] = i;\r\n        }\r\n        for (let i = count - 1; i > 0; i--) {\r\n            const j = this.random(0, i, true);\r\n            result[i] = result[i] ^ result[j];\r\n            result[j] = result[i] ^ result[j];\r\n            result[i] = result[i] ^ result[j];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * random shuffle the array.\r\n     * Fisher–Yates.\r\n     * @param items\r\n     */\r\n    public randomShuffleArray<T>(items: T[]): T[] {\r\n        if (this.isNullOrEmpty(items)) return [];\r\n        const count = items.length;\r\n        const result = [...items];\r\n        for (let i = count - 1; i > 0; i--) {\r\n            const j = this.random(0, i, true);\r\n            [result[i], result[j]] = [result[j], result[i]];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get a random generator.\r\n     * @param {number | number[]} length length or scale.\r\n     * @return {RandomGenerator}\r\n     */\r\n    public randomGenerator(length: number | number[] = 3): RandomGenerator {\r\n        return new RandomGenerator().random(length, this.defaultRandomFunc);\r\n    }\r\n\r\n    /**\r\n     * Generate a random point located on the surface of a unit sphere in an arbitrary number of dimensions,\r\n     * by Box-Muller transform and normalization.\r\n     * @param dimension\r\n     * @param randomFunc\r\n     */\r\n    public randomDimensionSphere(dimension: number = 2, randomFunc = undefined): number[] {\r\n        if (dimension < 0 || dimension != (dimension | 0)) return [];\r\n        if (randomFunc === undefined) {\r\n            randomFunc = this.defaultRandomFunc;\r\n        }\r\n        if (dimension === 1) {\r\n            return randomFunc() >= 0.5 ? [1] : [-1];\r\n        }\r\n        if (dimension === 2) {\r\n            const angle = Math.random() * 2 * Math.PI;\r\n            return [Math.cos(angle), Math.sin(angle)];\r\n        }\r\n\r\n        const ans: number[] = new Array<number>(dimension);\r\n\r\n        let d2: number = Math.floor(dimension >> 1) << 1;\r\n        let r2: number = 0;\r\n\r\n        for (let i = 0; i < d2; i += 2) {\r\n            const rr = -2.0 * Math.log(randomFunc());\r\n            const r = Math.sqrt(rr);\r\n            const theta = 2.0 * Math.PI * randomFunc();\r\n\r\n            r2 += rr;\r\n            ans[i] = r * Math.cos(theta);\r\n            ans[i + 1] = r * Math.sin(theta);\r\n        }\r\n\r\n        if (dimension % 2) {\r\n            const x = Math.sqrt(-2.0 * Math.log(randomFunc())) * Math.cos(2.0 * Math.PI * randomFunc());\r\n            ans[dimension - 1] = x;\r\n            r2 += Math.pow(x, 2);\r\n        }\r\n\r\n        const h = 1.0 / Math.sqrt(r2);\r\n\r\n        for (let i = 0; i < dimension; ++i) {\r\n            ans[i] *= h;\r\n        }\r\n\r\n        return ans;\r\n    }\r\n\r\n    /**\r\n     * 格式化 Timestamp 至 00:00.\r\n     *\r\n     * @param timestamp\r\n     * @param option 选择需显示的时间维度.\r\n     */\r\n    public formatTimeFromTimestamp(\r\n        timestamp: number,\r\n        option: GtkTypes.TimeFormatDimensionFlagsLike =\r\n        GtkTypes.TimeFormatDimensionFlags.Second |\r\n        GtkTypes.TimeFormatDimensionFlags.Minute): string {\r\n        const date = new Date(timestamp);\r\n        let result = \"\";\r\n        if ((option & GtkTypes.TimeFormatDimensionFlags.Hour) > 0) {\r\n            const hour = date.getHours().toString().padStart(2, \"0\");\r\n            if (result.length > 0) {\r\n                result += \":\";\r\n            }\r\n            result += hour;\r\n        }\r\n        if ((option & GtkTypes.TimeFormatDimensionFlags.Minute) > 0) {\r\n            const minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n            if (result.length > 0) {\r\n                result += \":\";\r\n            }\r\n            result += minutes;\r\n        }\r\n        if ((option & GtkTypes.TimeFormatDimensionFlags.Second) > 0) {\r\n            const seconds = date.getSeconds().toString().padStart(2, \"0\");\r\n            if (result.length > 0) {\r\n                result += \":\";\r\n            }\r\n            result += seconds;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 时间转换.\r\n     * 支持的时间单位范围：[毫秒,天]\r\n     * @param val 原值.\r\n     * @param from 原值时间维度.\r\n     * @param to 目标时间维度.\r\n     * @return {null} 入参在不支持的范围内时.\r\n     */\r\n    public timeConvert(val: number,\r\n                       from: GtkTypes.TimeFormatDimensionFlagsLike,\r\n                       to: GtkTypes.TimeFormatDimensionFlagsLike): number {\r\n        if (from === to) return val;\r\n        if (this.hammingWeight(from) !== 1 || this.hammingWeight(to) !== 1) return null;\r\n\r\n        if (\r\n            (0x1 << this.bitFirstOne(from)) as GtkTypes.TimeFormatDimensionFlags > GtkTypes.TimeFormatDimensionFlags.Day ||\r\n            (0x1 << this.bitFirstOne(to)) as GtkTypes.TimeFormatDimensionFlags > GtkTypes.TimeFormatDimensionFlags.Day\r\n        ) {\r\n            return null;\r\n        }\r\n\r\n        while (from !== to) {\r\n            if (from > to) {\r\n                switch (from) {\r\n                    case GtkTypes.TimeFormatDimensionFlags.Second:\r\n                        val *= GToolkit.MillisecondInSecond;\r\n                        break;\r\n                    case GtkTypes.TimeFormatDimensionFlags.Minute:\r\n                        val *= GToolkit.SecondInMinute;\r\n                        break;\r\n                    case GtkTypes.TimeFormatDimensionFlags.Hour:\r\n                        val *= GToolkit.MinuteInHour;\r\n                        break;\r\n                    case GtkTypes.TimeFormatDimensionFlags.Day:\r\n                        val *= GToolkit.HourInDay;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                from >>= 0x1;\r\n            } else {\r\n                switch (from) {\r\n                    case GtkTypes.TimeFormatDimensionFlags.Millisecond:\r\n                        val /= GToolkit.MillisecondInSecond;\r\n                        break;\r\n                    case GtkTypes.TimeFormatDimensionFlags.Second:\r\n                        val /= GToolkit.SecondInMinute;\r\n                        break;\r\n                    case GtkTypes.TimeFormatDimensionFlags.Minute:\r\n                        val /= GToolkit.MinuteInHour;\r\n                        break;\r\n                    case GtkTypes.TimeFormatDimensionFlags.Hour:\r\n                        val /= GToolkit.HourInDay;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                from <<= 0x1;\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    /**\r\n     * Clamp.\r\n     * @param {number} val\r\n     * @param {number} min=0\r\n     * @param {number} max=1\r\n     * @return {number}\r\n     */\r\n    public clamp(val: number,\r\n                 min: number = 0,\r\n                 max: number = 1): number {\r\n        return Math.min(max, Math.max(min, val));\r\n    }\r\n\r\n    /**\r\n     * 汉明重量.\r\n     * num 作为二进制时 1 的个数.\r\n     * @param num\r\n     */\r\n    public hammingWeight(num: number): number {\r\n        let result: number = 0;\r\n        let handle: number = 0;\r\n        while ((0x1 << handle) <= num) {\r\n            if ((num & 0x1 << handle) > 0) {\r\n                ++result;\r\n            }\r\n            ++handle;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * num 的二进制形式中第一个 1 的位置.\r\n     * @param num\r\n     * @return {number} 位置.\r\n     *      {-1} 时入参不合法.\r\n     */\r\n    public bitFirstOne(num: number): number {\r\n        if ((num | 0) !== num) return -1;\r\n\r\n        let handle: number = 0;\r\n        while ((0x1 << handle) <= num) ++handle;\r\n        return handle - 1;\r\n    }\r\n\r\n    /**\r\n     * num 的二进制形式中指定数位是否为 1.\r\n     * @param num\r\n     * @param bit 从右向左数第 bit 位.\r\n     */\r\n    public bitIn(num: number, bit: number): boolean {\r\n        return (num & (0x1 << bit)) > 0;\r\n    }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region MW\r\n\r\n//#region Constant\r\n    /**\r\n     * Guid of Root GameObject.\r\n     */\r\n    public readonly ROOT_GAME_OBJECT_GUID = \"SceneRoot\";\r\n\r\n    /**\r\n     * Guid of Root GameObject (old).\r\n     */\r\n    public readonly ROOT_GAME_OBJECT_GUID_BACKUP = \"ComponentRoot\";\r\n\r\n    /**\r\n     * Tag of Root GameObject.\r\n     * @type {string}\r\n     */\r\n    public readonly ROOT_GAME_OBJECT_TAG_CUSTOM = \"SceneRootTagByGtk\";\r\n\r\n    /**\r\n     * 全透明图片 GUID.\r\n     * @type {string}\r\n     */\r\n    public readonly IMAGE_FULLY_TRANSPARENT_GUID = \"168495\";\r\n\r\n    /**\r\n     * 纯黑圆形遮罩 GUID.\r\n     */\r\n    public readonly IMAGE_CIRCLE_MASK_GUID = \"212681\";\r\n\r\n    /**\r\n     * 白色方块 GUID.\r\n     * @type {string}\r\n     */\r\n    public readonly IMAGE_WHITE_SQUARE_GUID = \"114028\";\r\n\r\n    /**\r\n     * mw 导出颜色字符串正则.\r\n     * @type {RegExp}\r\n     * @private\r\n     */\r\n    private readonly REGEX_MW_EXPORT_COLOR_STR: RegExp = /(?=.*R)(?=.*G)(?=.*B)\\(([RGBA]=\\d*(\\.\\d*)?,?)+\\)/g;\r\n\r\n    /**\r\n     * mw 导出颜色值正则.\r\n     * @type {RegExp}\r\n     * @private\r\n     */\r\n    private readonly REGEX_MW_EXPORT_COLOR_VALUE_STR: RegExp = /([RGBA])=(\\d*(\\.\\d*)?)/g;\r\n\r\n    /**\r\n     * 十六进制颜色字符串正则.\r\n     * @type {RegExp}\r\n     * @private\r\n     */\r\n    private readonly REGEX_HEX_COLOR_STR: RegExp = /^#?[\\dA-Fa-f]+$/g;\r\n\r\n    /**\r\n     * mw 配置颜色字符串正则.\r\n     * @type {RegExp}\r\n     * @private\r\n     */\r\n    private readonly REGEX_MW_ARRAY_COLOR_STR: RegExp = /^[.|\\d]+$/g;\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Member\r\n    /**\r\n     * mw 场景根对象 引用.\r\n     * @type {mw.GameObject}\r\n     * @private\r\n     */\r\n    private _rootObj: mw.GameObject;\r\n\r\n    /**\r\n     * 该平台是否 use mouse 缓存.\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    private _useMouse: boolean = undefined;\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    /**\r\n     * 导出颜色字符串统一化.\r\n     * @param {string} str\r\n     * @param {boolean} fallback=false 是否 值不合法时 回退至透明.\r\n     * @returns {mw.LinearColor | undefined}\r\n     */\r\n    public catchMwExportColor(str: string, fallback: boolean = false): mw.LinearColor | undefined {\r\n        if (this.isNullOrEmpty(str)) return fallback ? new mw.LinearColor(0, 0, 0, 0) : undefined;\r\n        str = str.replace(/\\s/g, \"\");\r\n        if (this.isNullOrEmpty(str)) return fallback ? new mw.LinearColor(0, 0, 0, 0) : undefined;\r\n\r\n        let result = this.tryCatchHex(str);\r\n        if (result) return this.colorLikeToMwColor(result);\r\n\r\n        result = this.tryCatchMwArray(str);\r\n        if (result) return this.colorLikeToMwColor(result);\r\n\r\n        result = this.tryCatchMwExport(str);\r\n        if (result) return this.colorLikeToMwColor(result);\r\n\r\n        return fallback ? new mw.LinearColor(0, 0, 0, 0) : undefined;\r\n    }\r\n\r\n    /**\r\n     * 尝试捕获 mw 导出颜色字符串.\r\n     * @param {string} str\r\n     * @returns {IColor | undefined}\r\n     */\r\n    public tryCatchMwExport(str: string): IColor | undefined {\r\n        this.REGEX_MW_EXPORT_COLOR_STR.lastIndex = 0;\r\n        if (this.REGEX_MW_EXPORT_COLOR_STR.test(str)) {\r\n            let ret = {r: 0, g: 0, b: 0, a: 0};\r\n            for (let regArray of this.REGEX_MW_EXPORT_COLOR_VALUE_STR[Symbol.matchAll](str)) {\r\n                let v: number = Number(regArray[2]);\r\n                if (Number.isNaN(v)) continue;\r\n                switch (regArray[1].toUpperCase() as \"R\" | \"G\" | \"B\" | \"A\") {\r\n                    case \"R\":\r\n                        ret.r = v;\r\n                        break;\r\n                    case \"G\":\r\n                        ret.g = v;\r\n                        break;\r\n                    case \"B\":\r\n                        ret.b = v;\r\n                        break;\r\n                    case \"A\":\r\n                        ret.a = v;\r\n                        break;\r\n                }\r\n            }\r\n\r\n            if (ret.r === undefined) ret.r = 0;\r\n            if (ret.g === undefined) ret.g = 0;\r\n            if (ret.b === undefined) ret.b = 0;\r\n            return ret;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 尝试捕获十六进制颜色字符串.\r\n     * @param {string} str\r\n     * @returns {IColor | undefined}\r\n     */\r\n    public tryCatchHex(str: string): IColor | undefined {\r\n        this.REGEX_HEX_COLOR_STR.lastIndex = 0;\r\n        if (this.REGEX_HEX_COLOR_STR.test(str)) {\r\n            let ret = {r: 0, g: 0, b: 0, a: 0};\r\n            let strPure = str.replace(\"#\", \"\");\r\n            if (strPure.length === 3) {\r\n                // to 6\r\n                strPure = strPure.split(\"\").map(item => `${item}${item}`).join();\r\n            } else if (strPure.length === 4) {\r\n                // to 8\r\n                strPure = strPure.split(\"\").map(item => `${item}${item}`).join();\r\n            } else if (strPure.length !== 6 && strPure.length !== 8) {\r\n                if (strPure.length <= 6) {\r\n                    strPure = strPure + new Array(6 - strPure.length).fill(\"0\").join(\"\");\r\n                } else {\r\n                    // 这**绝对是来捣乱的\r\n                    return undefined;\r\n                }\r\n            }\r\n\r\n            ret.r = parseInt(strPure.slice(0, 2), 16);\r\n            ret.g = parseInt(strPure.slice(2, 4), 16);\r\n            ret.b = parseInt(strPure.slice(4, 6), 16);\r\n            ret.a = parseInt(strPure.slice(6, 8), 16);\r\n\r\n            if (Number.isNaN(ret.a)) ret.a = undefined;\r\n            return ret;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 尝试捕获 mw 配置颜色字符串.\r\n     * @param {string} str\r\n     * @returns {IColor | undefined}\r\n     */\r\n    public tryCatchMwArray(str: string): IColor | undefined {\r\n        this.REGEX_MW_ARRAY_COLOR_STR.lastIndex = 0;\r\n        if (this.REGEX_MW_ARRAY_COLOR_STR.test(str)) {\r\n            let elements = str.split(\"|\").map(item => Number(item)).filter(item => !isNaN(item));\r\n            if (elements.length < 3) {\r\n                return undefined;\r\n            }\r\n            return {r: elements[0], g: elements[1], b: elements[2], a: elements[3]};\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    private colorLikeToMwColor(colorLike: IColor): mw.LinearColor {\r\n        if (colorLike.r > 1 || colorLike.g > 1 || colorLike.b > 1 || (colorLike.a ?? 0) > 1) {\r\n            return new mw.LinearColor(\r\n                colorLike.r / 255,\r\n                colorLike.g / 255,\r\n                colorLike.b / 255,\r\n                colorLike?.a / 255 ?? 1);\r\n        }\r\n\r\n        return new mw.LinearColor(colorLike.r, colorLike.g, colorLike.b, colorLike?.a ?? 1);\r\n    }\r\n\r\n    /**\r\n     * return a vector whose value is vec + v.\r\n     * @param {V} vec\r\n     * @param {number | V} v\r\n     * @param {V} outer return new vector when undefined.\r\n     * @return {V}\r\n     */\r\n    public vectorAdd<V extends mw.Vector | mw.Vector2 | mw.Vector4>(vec: V, v: number | V, outer: V = undefined): V {\r\n        if (!outer) {\r\n            outer = vec.clone() as V;\r\n        }\r\n        if (this.isNumber(v)) {\r\n            outer.x += v;\r\n            outer.y += v;\r\n            if (\"z\" in outer) outer.z += v;\r\n            if (\"w\" in outer) outer.w += v;\r\n        } else outer.add(v as any);\r\n\r\n        return outer;\r\n    }\r\n\r\n    /**\r\n     * return a vector whose value is vec - v.\r\n     * @param {V} vec\r\n     * @param {number | V} v\r\n     * @param {V} outer return new vector when undefined.\r\n     * @return {V}\r\n     */\r\n    public vectorSub<V extends mw.Vector | mw.Vector2 | mw.Vector4>(vec: V, v: number | V, outer: V = undefined): V {\r\n        if (!outer) {\r\n            outer = vec.clone() as V;\r\n        }\r\n        if (this.isNumber(v)) {\r\n            outer.x -= v;\r\n            outer.y -= v;\r\n            if (\"z\" in outer) outer.z -= v;\r\n            if (\"w\" in outer) outer.w -= v;\r\n        } else outer.subtract(v as any);\r\n\r\n        return outer;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * return a vector whose value is vec * v.\r\n     * @param {V} vec\r\n     * @param {number | V} v\r\n     * @param {V} outer return new vector when undefined.\r\n     * @return {V}\r\n     */\r\n    public vectorMul<V extends mw.Vector | mw.Vector2 | mw.Vector4>(vec: V, v: number | V, outer: V = undefined): V {\r\n        if (!outer) {\r\n            outer = vec.clone() as V;\r\n        }\r\n        if (this.isNumber(v)) {\r\n            outer.x *= v;\r\n            outer.y *= v;\r\n            if (\"z\" in outer) outer.z *= v;\r\n            if (\"w\" in outer) outer.w *= v;\r\n        } else outer.multiply(v as any);\r\n\r\n        return outer;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * return a vector whose value is vec / v.\r\n     * @param {V} vec\r\n     * @param {number | V} v\r\n     * @param {V} outer return new vector when undefined.\r\n     * @return {V}\r\n     */\r\n    public vectorDiv<V extends mw.Vector | mw.Vector2 | mw.Vector4>(vec: V, v: number | V, outer: V = undefined): V {\r\n        if (!outer) {\r\n            outer = vec.clone() as V;\r\n        }\r\n        if (this.isNumber(v)) {\r\n            outer.x /= v;\r\n            outer.y /= v;\r\n            if (\"z\" in outer) outer.z /= v;\r\n            if (\"w\" in outer) outer.w /= v;\r\n        } else outer.divide(v as any);\r\n\r\n        return outer;\r\n    }\r\n\r\n    public newWithX(vec: mw.Vector, val: number): mw.Vector;\r\n\r\n    public newWithX(vec: mw.Vector2, val: number): mw.Vector2;\r\n\r\n    public newWithX(vec: mw.Rotation, val: number): mw.Rotation;\r\n\r\n    /**\r\n     * clone a new vector with a new x.\r\n     * @param vec origin vector.\r\n     * @param val new value.\r\n     */\r\n    public newWithX(vec: mw.Vector | mw.Vector2 | mw.Rotation, val: number) {\r\n        if (vec instanceof mw.Vector) {\r\n            return new mw.Vector(val, vec.y, vec.z);\r\n        } else if (vec instanceof mw.Rotation) {\r\n            return new mw.Rotation(val, vec.y, vec.z);\r\n        } else if (vec instanceof mw.Vector2) {\r\n            return new mw.Vector2(val, vec.y);\r\n        }\r\n    }\r\n\r\n    public newWithY(vec: mw.Vector, val: number): mw.Vector;\r\n\r\n    public newWithY(vec: mw.Vector2, val: number): mw.Vector2;\r\n\r\n    public newWithY(vec: mw.Rotation, val: number): mw.Rotation;\r\n\r\n    /**\r\n     * clone a new vector with a new y.\r\n     * @param vec origin vector.\r\n     * @param val new value.\r\n     */\r\n    public newWithY(vec: mw.Vector | mw.Vector2 | mw.Rotation, val: number) {\r\n        if (vec instanceof mw.Vector) {\r\n            return new mw.Vector(vec.x, val, vec.z);\r\n        } else if (vec instanceof mw.Rotation) {\r\n            return new mw.Rotation(vec.x, val, vec.z);\r\n        } else if (vec instanceof mw.Vector2) {\r\n            return new mw.Vector2(vec.x, val);\r\n        }\r\n    }\r\n\r\n    public newWithZ(vec: mw.Vector, val: number): mw.Vector;\r\n\r\n    public newWithZ(vec: mw.Rotation, val: number): mw.Rotation;\r\n\r\n    /**\r\n     * clone a new vector with a new z.\r\n     * @param vec origin vector.\r\n     * @param val new value.\r\n     */\r\n    public newWithZ(vec: mw.Vector | mw.Rotation, val: number) {\r\n        if (vec instanceof mw.Vector) {\r\n            return new mw.Vector(vec.x, vec.y, val);\r\n        } else if (vec instanceof mw.Rotation) {\r\n            return new mw.Rotation(vec.x, vec.y, val);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 计算向量 a 至 b 之间的四元数.\r\n     * @param lhs\r\n     * @param rhs\r\n     * @param fallbackAxis 回退轴. 当 lhs 与 rhs 共线时使用.\r\n     */\r\n    public quaternionBetweenVector(lhs: mw.Vector, rhs: mw.Vector, fallbackAxis: mw.Vector = undefined): mw.Quaternion {\r\n        if (this.equal(lhs, rhs, GToolkit.SIMPLE_EPSILON)) {\r\n            return mw.Quaternion.identity;\r\n        }\r\n\r\n        let axis = mw.Vector.cross(lhs, rhs);\r\n        if (Math.abs(axis.length) < GToolkit.SIMPLE_EPSILON) {\r\n            if (fallbackAxis !== undefined) {\r\n                if (mw.Vector.dot(fallbackAxis, lhs) !== 0) {\r\n                    axis = fallbackAxis;\r\n                } else {\r\n                    mw.console.warn(\"fallback Axis is not valid.\");\r\n                }\r\n            }\r\n\r\n            if (axis.length === 0) {\r\n                axis = mw.Vector.cross(lhs, mw.Vector.right);\r\n            }\r\n            if (axis.length === 0) {\r\n                axis = mw.Vector.cross(lhs, mw.Vector.up);\r\n            }\r\n        }\r\n\r\n        const angle = mw.Vector.angle3D(lhs, rhs);\r\n        return mw.Quaternion.fromAxisAngle(axis.normalized, this.radius(angle));\r\n\r\n    }\r\n\r\n    /**\r\n     * //TODO_LviatYi [待补完]\r\n     * 等值判断.\r\n     * @param lhs\r\n     * @param rhs\r\n     * @param epsilon 精度误差.\r\n     * @alpha\r\n     */\r\n    public equal<T>(lhs: T, rhs: T, epsilon: T | number = GtkTypes.Epsilon.Normal): boolean {\r\n        if (this.isNumber(lhs)) {\r\n            return Math.abs(lhs - (rhs as number)) < (epsilon as number);\r\n        }\r\n        if (lhs instanceof mw.Vector && rhs instanceof mw.Vector) {\r\n            if (typeof epsilon === \"number\") {\r\n                return this.equal(lhs.x, rhs.x, epsilon) &&\r\n                    this.equal(lhs.y, rhs.y, epsilon) &&\r\n                    this.equal(lhs.z, rhs.z, epsilon);\r\n            } else if (epsilon instanceof mw.Vector) {\r\n                return this.equal(lhs.x, rhs.x, epsilon.x) &&\r\n                    this.equal(lhs.y, rhs.y, epsilon.y) &&\r\n                    this.equal(lhs.z, rhs.z, epsilon.z);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Manhattan Distance.\r\n     * 曼哈顿距离.\r\n     * 当 b 为 null 时 将 a 视为向量. 并计算其长度平方.\r\n     */\r\n    public manhattanDistance(a: number[] | GtkTypes.Vector2 | GtkTypes.Vector3,\r\n                             b: number[] | GtkTypes.Vector2 | GtkTypes.Vector3 = null): number {\r\n        let result = 0;\r\n        if (a instanceof Array) {\r\n            if (b && a.length !== (b as Array<number>).length) return result;\r\n\r\n            for (let i = 0; i < a.length; i++) {\r\n                result += Math.abs(a[i] - (b ? b[i] : 0));\r\n            }\r\n\r\n            return result;\r\n        } else {\r\n            result = Math.abs(a.x - (b ? (b as GtkTypes.Vector3).x : 0)) +\r\n                Math.abs(a.y - (b ? (b as GtkTypes.Vector3).y : 0));\r\n            if (\"z\" in a) {\r\n                result += Math.abs(a.z as number - (b ? (b as GtkTypes.Vector3).z : 0));\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Squared Euclid Distance.\r\n     * 两点欧几里得距离的平方.\r\n     * 当 b 为 null 时 将 a 视为向量. 并计算其长度平方.\r\n     * @param a\r\n     * @param b\r\n     */\r\n    public squaredEuclideanDistance<T extends number[] |\r\n        GtkTypes.Vector2 |\r\n        GtkTypes.Vector3>(a: T,\r\n                          b: T = null): number {\r\n        let result = 0;\r\n        if (a instanceof Array) {\r\n            if (b && a.length !== (b as Array<number>).length) return result;\r\n\r\n            for (let i = 0; i < a.length; i++) {\r\n                result += Math.pow(a[i] - (b ? b[i] : 0), 2);\r\n            }\r\n\r\n            return result;\r\n        } else {\r\n            result = Math.pow(a.x - (b ? (b as GtkTypes.Vector3).x : 0), 2) +\r\n                Math.pow(a.y - (b ? (b as GtkTypes.Vector3).y : 0), 2);\r\n            if (\"z\" in a) {\r\n                result += Math.pow(a.z as number - (b ? (b as GtkTypes.Vector3).z : 0), 2);\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Euclid Distance.\r\n     * 欧几里得距离.\r\n     * 当 b 为 null 时 将 a 视为向量. 并计算其长度.\r\n     * @param a\r\n     * @param b\r\n     */\r\n    public euclideanDistance<T extends number[] |\r\n        GtkTypes.Vector2 |\r\n        GtkTypes.Vector3>(a: T, b: T = null): number {\r\n        return Math.sqrt(this.squaredEuclideanDistance(a, b));\r\n    }\r\n\r\n    /**\r\n     * 将 origin 向量围绕 axis 轴旋转 angle 角度.\r\n     * @param origin 初始向量.\r\n     * @param axis\r\n     * @param angle\r\n     */\r\n    public rotateVector(origin: mw.Vector,\r\n                        axis: mw.Vector,\r\n                        angle: number) {\r\n        const quaternion = mw.Quaternion.fromAxisAngle(axis.normalized, this.radius(angle));\r\n        return quaternion.toRotation().rotateVector(origin);\r\n    }\r\n\r\n    /**\r\n     * 屏幕坐标系 转 UI 坐标系.\r\n     * @param location\r\n     * @param parent=undefined 指定的父级 Widget.\r\n     *      - undefined 使用 UIService.canvas 作为父级.\r\n     *      - 全无效时使用 zero.\r\n     */\r\n    public screenToUI(location: mw.Vector2, parent?: mw.Widget): mw.Vector2 {\r\n        return location\r\n            .clone()\r\n            .subtract(\r\n                parent\r\n                    ?.cachedGeometry\r\n                    ?.getAbsolutePosition() ??\r\n                UIService?.canvas\r\n                    ?.cachedGeometry\r\n                    ?.getAbsolutePosition() ??\r\n                mw.Vector2.zero)\r\n            .divide(mw.getViewportScale());\r\n    }\r\n\r\n    /**\r\n     * 泛型获取 GameObject.\r\n     * @param guid\r\n     */\r\n    public getGameObjectByGuid<T>(guid: string): T | null {\r\n        return (mw.GameObject.findGameObjectById(guid) ?? null) as T;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 及其子 GameObject 下的所有指定脚本.\r\n     * @param object\r\n     * @param scriptCls\r\n     * @param traverse 遍历深度. 从 1 计数.\r\n     *      0 default. 无限遍历.\r\n     */\r\n    public getComponent<T extends mw.Script>(\r\n        object: mw.GameObject,\r\n        scriptCls: AbstractAllowClass<T>,\r\n        traverse: number = 0): T[] {\r\n        if (!object) return [];\r\n\r\n        const result: T[] = [];\r\n\r\n        let traversed: number = 0;\r\n        let stack: mw.GameObject[] = [object];\r\n        let cache: mw.GameObject[] = [];\r\n\r\n        do {\r\n            for (const go of stack) {\r\n                cache.push(...go.getChildren());\r\n                result.push(...go.getComponents(scriptCls as Constructor<T>));\r\n            }\r\n            stack = cache;\r\n            cache = [];\r\n            ++traversed;\r\n        } while (stack.length > 0 && (traverse === 0 || (traversed < traverse)));\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 及其子 GameObject 下的首个指定脚本.\r\n     * @param object\r\n     * @param scriptCls\r\n     * @param traverse 遍历深度. 从 1 计数.\r\n     *      0 default. 无限遍历.\r\n     */\r\n    public getFirstComponent<T extends mw.Script>(object: mw.GameObject,\r\n                                                  scriptCls: AbstractAllowClass<T>,\r\n                                                  traverse: number = 0): T | null {\r\n        if (!object) return null;\r\n\r\n        let traversed: number = 0;\r\n        let stack: mw.GameObject[] = [object];\r\n        let cache: mw.GameObject[] = [];\r\n\r\n        do {\r\n            for (const go of stack) {\r\n                cache.push(...go.getChildren());\r\n                const script = go.getComponent(scriptCls as Constructor<T>);\r\n                if (script) return script as T;\r\n            }\r\n            stack = cache;\r\n            cache = [];\r\n            ++traversed;\r\n        } while (stack.length > 0 && (traverse === 0 || (traversed < traverse)));\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 及其子 GameObject 下的所有指定脚本.\r\n     * @param object\r\n     * @param method\r\n     * @param traverse 遍历深度. 从 1 计数.\r\n     *      0 default. 无限遍历.\r\n     */\r\n    public getComponentIs<T extends mw.Script>(\r\n        object: mw.GameObject,\r\n        method: string | ((instance: object) => boolean),\r\n        traverse: number = 0): T[] {\r\n        if (!object) return [];\r\n\r\n        const result: T[] = [];\r\n\r\n        let traversed: number = 0;\r\n        let stack: mw.GameObject[] = [object];\r\n        let cache: mw.GameObject[] = [];\r\n\r\n        do {\r\n            for (const go of stack) {\r\n                cache.push(...go.getChildren());\r\n                result.push(...go.getComponents()\r\n                    .filter(script => this.is<T>(script, method))\r\n                    .map((value) => (value as T)));\r\n            }\r\n            stack = cache;\r\n            cache = [];\r\n            ++traversed;\r\n        } while (stack.length > 0 && (traverse === 0 || (traversed < traverse)));\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 及其子 GameObject 下的首个指定脚本.\r\n     * @param object\r\n     * @param method\r\n     * @param traverse 遍历深度. 从 1 计数.\r\n     *      0 default. 无限遍历.\r\n     */\r\n    public getFirstComponentIs<T extends mw.Script>(object: mw.GameObject,\r\n                                                    method: string | ((instance: object) => boolean),\r\n                                                    traverse: number = 0): T | null {\r\n        if (!object) return null;\r\n\r\n        let traversed: number = 0;\r\n        let stack: mw.GameObject[] = [object];\r\n        let cache: mw.GameObject[] = [];\r\n\r\n        do {\r\n            for (const go of stack) {\r\n                cache.push(...go.getChildren());\r\n                const script = go.getComponents().find((s) => {\r\n                    return this.is(s, method);\r\n                });\r\n                if (script) return script as T;\r\n            }\r\n            stack = cache;\r\n            cache = [];\r\n            ++traversed;\r\n        } while (stack.length > 0 && (traverse === 0 || (traversed < traverse)));\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 及其子 GameObject 下的所有同名 GameObject.\r\n     * @param object\r\n     * @param name\r\n     */\r\n    public getGameObject(object: mw.GameObject, name: string): mw.GameObject[] {\r\n        if (!object) return [];\r\n\r\n        const result: mw.GameObject[] = [];\r\n\r\n        let p: mw.GameObject = object;\r\n        let stack: mw.GameObject[] = [p];\r\n\r\n        while (stack.length > 0) {\r\n            p = stack.shift();\r\n            stack.push(...p.getChildren());\r\n            result.push(...p.getChildren()\r\n                .filter(g => g.name === name));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 及其子 GameObject 下的首个同名 GameObject.\r\n     * @param object\r\n     * @param name\r\n     */\r\n    public getFirstGameObject(object: mw.GameObject, name: string): mw.GameObject | null {\r\n        if (!object) return null;\r\n\r\n        let p: mw.GameObject = object;\r\n        let stack: mw.GameObject[] = [p];\r\n\r\n        while (stack.length > 0) {\r\n            p = stack.shift();\r\n            stack.push(...p.getChildren());\r\n            const result = p.getChildren().find((g) => {\r\n                return g.name === name;\r\n            });\r\n            if (result) return result;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 获取 GameObject 指定层数的所有子 GameObject.\r\n     * @param object\r\n     * @param traverse 遍历深度. 从 1 计数.\r\n     *      - default undefined.\r\n     *      - null 或 undefined 无限遍历.\r\n     */\r\n    public getChildren(object: mw.GameObject, traverse: number = undefined): mw.GameObject[] {\r\n        if (!object) return [];\r\n\r\n        let result: mw.GameObject[] = [...object.getChildren()];\r\n\r\n        let p: number = 0;\r\n        let traversed: number = 1;\r\n        while (p < result.length && (this.isNullOrUndefined(traverse) || traversed < traverse)) {\r\n            const currLength = result.length;\r\n            for (; p < currLength; ++p) {\r\n                result.push(...result[p].getChildren());\r\n            }\r\n            ++traversed;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 获取场景中的根 GameObject.\r\n     */\r\n    public getRootGameObject(): mw.GameObject | undefined {\r\n        if (this._rootObj) return this._rootObj;\r\n        this._rootObj = mw.GameObject.findGameObjectById(this.ROOT_GAME_OBJECT_GUID);\r\n        if (!this._rootObj) this._rootObj = mw.GameObject.findGameObjectById(this.ROOT_GAME_OBJECT_GUID_BACKUP);\r\n        if (!this._rootObj) this._rootObj = mw.GameObject.findGameObjectsByTag(this.ROOT_GAME_OBJECT_TAG_CUSTOM)[0];\r\n\r\n        return this._rootObj;\r\n    }\r\n\r\n    /**\r\n     * 在场景中的根 GameObject 上挂载脚本.\r\n     */\r\n    public addRootScript<T extends mw.Script>(scriptCls: Constructor<T>): T {\r\n        let root = this.getRootGameObject();\r\n\r\n        if (!root) root = mw.GameObject.spawn(\"Anchor\", {\r\n            replicates: false,\r\n        });\r\n\r\n        return root?.addComponent(scriptCls) ?? undefined;\r\n    }\r\n\r\n    /**\r\n     * 在场景中的根 GameObject 上获取脚本.\r\n     * @param {Constructor<T>} scriptCls\r\n     * @return {T | null}\r\n     */\r\n    public getRootScript<T extends mw.Script>(scriptCls: Constructor<T>): T | null {\r\n        return this.getRootGameObject()?.getComponent(scriptCls) ?? null;\r\n    }\r\n\r\n    /**\r\n     * 在场景中的根 GameObject 上获取所有脚本.\r\n     * @param {Constructor<T>} scriptCls\r\n     * @return {T[] | null}\r\n     */\r\n    public getRootScripts<T extends mw.Script>(scriptCls: Constructor<T>): T[] | null {\r\n        return this.getRootGameObject()?.getComponents(scriptCls) ?? null;\r\n    }\r\n\r\n    /**\r\n     * 角色 性别.\r\n     */\r\n    public gender(character: mw.Character): GtkTypes.GenderTypes {\r\n        let type = character.getDescription()\r\n            .advance\r\n            .base\r\n            .characterSetting.somatotype;\r\n\r\n        if (\r\n            type === mw.SomatotypeV2.AnimeMale ||\r\n            type === mw.SomatotypeV2.LowpolyAdultMale ||\r\n            type === mw.SomatotypeV2.RealisticAdultMale ||\r\n            type === mw.SomatotypeV2.CartoonyMale\r\n        ) {\r\n            return GtkTypes.GenderTypes.Male;\r\n        } else if (\r\n            type === mw.SomatotypeV2.AnimeFemale ||\r\n            type === mw.SomatotypeV2.LowpolyAdultFemale ||\r\n            type === mw.SomatotypeV2.RealisticAdultFemale ||\r\n            type === mw.SomatotypeV2.CartoonyFemale\r\n        ) {\r\n            return GtkTypes.GenderTypes.Female;\r\n        } else {\r\n            return GtkTypes.GenderTypes.Helicopter;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * GameObject 是否为 Character.\r\n     * @param obj\r\n     */\r\n    public isCharacter(obj: mw.GameObject): obj is mw.Character {\r\n        return (obj instanceof mw.Character) && obj.player !== null;\r\n    }\r\n\r\n    /**\r\n     * 是否 playerId gameObjectId 或 obj 指向自己.\r\n     * @scope 仅客户端.\r\n     * @param idOrObj\r\n     */\r\n    public isSelfCharacter(idOrObj: number | string | mw.GameObject) {\r\n        if (!SystemUtil.isClient()) {\r\n            return false;\r\n        }\r\n        const self: Player = Player.localPlayer;\r\n\r\n        if (typeof idOrObj === \"number\") {\r\n            return self.playerId === idOrObj;\r\n        } else if (typeof idOrObj === \"string\") {\r\n            return self.character.gameObjectId === idOrObj;\r\n        } else {\r\n            return this.isCharacter(idOrObj) && idOrObj.player === self;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * playerId userId 与 player 归一化 player.\r\n     * @param player\r\n     */\r\n    public queryPlayer(player: number | string | Player) {\r\n        if (typeof player === \"number\" || typeof player === \"string\") {\r\n            return Player.getPlayer(player);\r\n        }\r\n        return player;\r\n    }\r\n\r\n    /**\r\n     * 获取角色胶囊体 下圆心坐标.\r\n     * @param character\r\n     */\r\n    public getCharacterCapsuleLowerCenter(character: mw.Character): mw.Vector {\r\n        return character.worldTransform.position.add(this.getCharacterCapsuleLowerCenterRelative(character));\r\n    }\r\n\r\n    /**\r\n     * 获取角色胶囊体 下圆心相对坐标.\r\n     * @param character\r\n     */\r\n    public getCharacterCapsuleLowerCenterRelative(character: mw.Character): mw.Vector {\r\n        let pVec = this.getCharacterCapsuleLowerCenterVector(character).multiply(character.worldTransform.scale.z);\r\n        pVec = character.localTransform.rotation.rotateVector(pVec);\r\n\r\n        return pVec;\r\n    }\r\n\r\n    /**\r\n     * 获取角色胶囊体 下圆心 相对于角色位置 向量.\r\n     * 主管的 不受角色属性影响.\r\n     * @param character\r\n     */\r\n    public getCharacterCapsuleLowerCenterVector(character: mw.Character): mw.Vector {\r\n        const rectHalfHeight = character.collisionExtent.z - character.collisionExtent.x;\r\n        return mw.Vector.down.multiply(rectHalfHeight);\r\n    }\r\n\r\n    /**\r\n     * 获取角色胶囊体 底部点.\r\n     * @param character\r\n     */\r\n    public getCharacterCapsuleBottomPoint(character: mw.Character): mw.Vector {\r\n        let pVec = mw.Vector.down.multiply(character.collisionExtent.z * character.worldTransform.scale.z);\r\n        pVec = character.localTransform.rotation.rotateVector(pVec);\r\n\r\n        return character.worldTransform.position.add(pVec);\r\n    }\r\n\r\n    /**\r\n     * 获取角色胶囊体 底部点.\r\n     * @param character\r\n     */\r\n    public getCharacterCapsuleBottomPointRelative(character: mw.Character): mw.Vector {\r\n        let pVec = mw.Vector.down.multiply(character.collisionExtent.z * character.worldTransform.scale.z);\r\n        pVec = character.localTransform.rotation.rotateVector(pVec);\r\n\r\n        return pVec;\r\n    }\r\n\r\n    /**\r\n     * 安全设置 Character Description.\r\n     * @param character\r\n     * @param description\r\n     * @return set interval character state.\r\n     */\r\n    public safeSetDescription(character: mw.Character, description: string): boolean | null {\r\n        if (!character || this.isNullOrEmpty(character?.gameObjectId)) return false;\r\n        if (this._characterDescriptionLockers.has(character.gameObjectId)) return false;\r\n        this._characterDescriptionLockers.add(character.gameObjectId);\r\n        character\r\n            .asyncReady()\r\n            .then(\r\n                () => {\r\n                    this.doWhenTrue(\r\n                        () => character.isDescriptionReady,\r\n                        () => {\r\n                            character.setDescription([description]);\r\n                            this._characterDescriptionLockers.delete(character.gameObjectId);\r\n                        },\r\n                    );\r\n                },\r\n            );\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 设置 Button Guid.\r\n     * 默认将 normalImageGuid 传播至:\r\n     *   normalImageGuid\r\n     *   pressedImageGuid\r\n     *   disableImageGuid\r\n     * @param button\r\n     * @param normalGuid\r\n     * @param pressedGuid\r\n     * @param disableGuid\r\n     */\r\n    public setButtonGuid(button: mw.Button | mw.StaleButton,\r\n                         normalGuid: string,\r\n                         pressedGuid: string = undefined,\r\n                         disableGuid: string = undefined) {\r\n        if (!pressedGuid) {\r\n            pressedGuid = normalGuid;\r\n        }\r\n        if (!disableGuid) {\r\n            disableGuid = normalGuid;\r\n        }\r\n        button.normalImageGuid = normalGuid;\r\n        button.pressedImageGuid = pressedGuid;\r\n        button.disableImageGuid = disableGuid;\r\n    }\r\n\r\n    /**\r\n     * 尝试设置 UI 可见性.\r\n     * 当不需改变时不设置.\r\n     *\r\n     * @param ui\r\n     * @param visibility\r\n     *  当为 boolean 时 将按照常用策略将 true 映射为 {@link mw.SlateVisibility.Visible} 或 {@link mw.SlateVisibility.SelfHitTestInvisible}.\r\n     * @param syncEnable 是否同步设置 enable.\r\n     *      true default. 当 ui 为 {@link mw.Button} 或 {@link mw.StaleButton} 时 将根据 visibility 同步设置 enable.\r\n     * @return 返回是否发生实际更改.\r\n     */\r\n    public trySetVisibility(ui: mw.Widget | mw.UIScript, visibility: mw.SlateVisibility | boolean, syncEnable: boolean = true): boolean {\r\n        ui = ui instanceof mw.Widget ? ui : ui.uiObject;\r\n\r\n        if (typeof visibility === \"boolean\") {\r\n            if (ui instanceof mw.Button || ui instanceof mw.StaleButton) {\r\n                visibility = visibility ? mw.SlateVisibility.Visible : mw.SlateVisibility.Hidden;\r\n            } else {\r\n                visibility = visibility ? mw.SlateVisibility.SelfHitTestInvisible : mw.SlateVisibility.Hidden;\r\n            }\r\n        }\r\n\r\n        if (syncEnable && (ui instanceof mw.Button || ui instanceof mw.StaleButton)) {\r\n            ui.enable = visibility === mw.SlateVisibility.Visible;\r\n        }\r\n        if (ui.visibility === visibility) {\r\n            return false;\r\n        }\r\n\r\n        ui.visibility = visibility;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 尝试设置 UI 文本性.\r\n     * @desc 使用 LviatYi 等提供的 UIScriptHeader_Template. 将提供自动比较.\r\n     * @param {mw.Text} ui\r\n     * @param {string} text\r\n     * @return {boolean}\r\n     */\r\n    public trySetText(ui: { text: string }, text: string): boolean {\r\n        if (ui.text === text) return false;\r\n        ui.text = text;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 是否 给定平台绝对坐标 在 UI 控件内.\r\n     * @param ui\r\n     * @param position\r\n     */\r\n    public isPlatformAbsoluteInWidget(position: mw.Vector2, ui: mw.Widget) {\r\n        const absPos = ui.cachedGeometry.getAbsolutePosition();\r\n        const absSize = ui.cachedGeometry.getAbsoluteSize();\r\n\r\n        return position.x >= absPos.x &&\r\n            position.x <= absPos.x + absSize.x &&\r\n            position.y >= absPos.y &&\r\n            position.y <= absPos.y + absSize.y;\r\n    }\r\n\r\n    /**\r\n     * 获取 UI 空间下 控件的 计算后坐标.\r\n     * @desc 计算后大小将考虑父子关系的坐标.\r\n     * @param {Widget} ui\r\n     * @return {mw.Vector2}\r\n     */\r\n    public getUiResolvedPosition(ui: mw.Widget): mw.Vector2 {\r\n        return absoluteToLocal(\r\n            UIService.canvas.cachedGeometry,\r\n            ui.cachedGeometry.getAbsolutePosition());\r\n    }\r\n\r\n    /**\r\n     * 获取 UI 空间下 控件的 计算后大小.\r\n     * @desc 计算后大小将考虑父子关系的缩放.\r\n     * @param {Widget} ui\r\n     */\r\n    public getUiResolvedSize(ui: mw.Widget): mw.Vector2 {\r\n        return ui\r\n            .cachedGeometry\r\n            .getAbsoluteSize()\r\n            .divide(getViewportScale());\r\n    }\r\n\r\n    /**\r\n     * 获取 UiScript 构成的列表中 最上层 UiScript.\r\n     * @desc 仅当\r\n     * @param uis\r\n     */\r\n    public getTopUi(uis: mw.UIScript[]): mw.UIScript | null {\r\n        if (this.isNullOrEmpty(uis)) return null;\r\n        let topUi: mw.UIScript = uis[0];\r\n        if (!(topUi?.uiObject ?? null)) return null;\r\n        for (let i = 1; i < uis.length; ++i) {\r\n            const ui = uis[i];\r\n            if (!(ui?.uiObject ?? null)) continue;\r\n            if (ui.layer > topUi.layer ||\r\n                (ui.uiObject[\"slot\"]?.zOrder ?? -1) > (topUi.uiObject[\"slot\"]?.zOrder ?? -1)) topUi = ui;\r\n        }\r\n\r\n        return topUi ?? null;\r\n    }\r\n\r\n    public compareWidgetStack(lhs: mw.Widget, rhs: mw.Widget): number {\r\n        const root = UIService.canvas;\r\n        let rootLhs: mw.Widget;\r\n        let rootRhs: mw.Widget;\r\n        let pl = lhs;\r\n        let pr = rhs;\r\n        let lastPl: mw.Widget;\r\n        let lastPr: mw.Widget;\r\n\r\n        while (pl && pr) {\r\n            if (pl === pr) {\r\n                return this.compareSameParentWidgetStack(lastPl, lastPr) *\r\n                    (!rootLhs && !rootRhs ? 1 : -1);\r\n            }\r\n\r\n            lastPl = pl;\r\n            lastPr = pr;\r\n            if (pl.parent && pl.parent !== root) pl = pl.parent;\r\n            else if (!rootLhs) {\r\n                if (pl.parent !== root) return this.isWidgetAttachOnRoot(pr) ? -1 : 0;\r\n                rootLhs = pl;\r\n                pl = rhs;\r\n            }\r\n\r\n            if (pr.parent && pr.parent !== root) pr = pr.parent;\r\n            else if (!rootRhs) {\r\n                if (pr.parent !== root) return this.isWidgetAttachOnRoot(pl) ? -1 : 0;\r\n                rootRhs = pr;\r\n                pr = lhs;\r\n            }\r\n\r\n            if (rootLhs && rootRhs) {\r\n                // UIService layer manager needed.\r\n                return rootLhs.zOrder - rootRhs.zOrder;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * Compare widget stack who has same parent.\r\n     * @param {mw.Widget} lhs\r\n     * @param {mw.Widget} rhs\r\n     * @return {number}\r\n     */\r\n    public compareSameParentWidgetStack(lhs: mw.Widget, rhs: mw.Widget): number {\r\n        if (lhs.zOrder !== rhs.zOrder) return lhs.zOrder - rhs.zOrder;\r\n        return this.getWidgetIndexInParent(lhs) - this.getWidgetIndexInParent(rhs);\r\n    }\r\n\r\n    /**\r\n     * Check if widget is attached on root.\r\n     * 检查是否 Widget 挂在在指定的 root 上\r\n     * @param {mw.Widget} widget\r\n     * @param {mw.Widget} root=undefined\r\n     *      - undefined: 默认指向 {@link UIService.canvas}\r\n     * @return {boolean}\r\n     */\r\n    public isWidgetAttachOnRoot(widget: mw.Widget, root: mw.Widget = undefined): boolean {\r\n        if (!widget) return false;\r\n        if (!root) root = UIService.canvas;\r\n        let p = widget;\r\n        while (p) {\r\n            if (p === root) return true;\r\n            p = p.parent;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get widget index in parent.\r\n     * @param {mw.Widget} widget\r\n     * @return {number}\r\n     *     - -1: widget is not attached on parent.\r\n     */\r\n    public getWidgetIndexInParent(widget: mw.Widget): number {\r\n        if (!widget.parent) {\r\n            return -1;\r\n        }\r\n        return widget.parent[\"get\"]()?.GetChildIndex(widget[\"get\"]()) ?? -1;\r\n    }\r\n\r\n    /**\r\n     * 获取 Ui 指定层数的所有子 Ui.\r\n     * @param object\r\n     * @param traverse 遍历深度. 从 1 计数.\r\n     *      - default 1.\r\n     *      - null 或 undefined 无限遍历.\r\n     */\r\n    public getUiChildren<Item = mw.Widget>(object: mw.Widget, traverse: number = 1): Item[] {\r\n        if (!object) return [];\r\n\r\n        let result: Item[] = [];\r\n        for (let i = 0; i < object.getChildrenCount(); ++i) result.push(object.getChildAt(i) as Item);\r\n\r\n        let p: number = 0;\r\n        let traversed: number = 1;\r\n        while (p < result.length && (this.isNullOrUndefined(traverse) || traversed < traverse)) {\r\n            const currLength = result.length;\r\n            for (; p < currLength; ++p) {\r\n                for (let i = 0; i < (result[p] as mw.Widget).getChildrenCount(); ++i)\r\n                    result.push((result[p] as mw.Widget).getChildAt(i) as Item);\r\n            }\r\n\r\n            ++traversed;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 使用 x,y 而非 Vector2 直接设定 UI 位置.\r\n     * @param {Widget} ui\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    public setUiPosition(ui: mw.Widget, x: number, y: number) {\r\n        try {\r\n            ui[\"get\"]()[\"SetPosition\"](x, y);\r\n        } catch (e) {\r\n            ui.position = new mw.Vector2(x, y);\r\n        }\r\n    }\r\n\r\n    public setUiPositionX(ui: mw.Widget, x: number) {\r\n        this.setUiPosition(ui, x, ui.position.y);\r\n    }\r\n\r\n    public setUiPositionY(ui: mw.Widget, y: number) {\r\n        this.setUiPosition(ui, ui.position.x, y);\r\n    }\r\n\r\n    /**\r\n     * 使用 x,y 而非 Vector2 直接设定 UI 大小.\r\n     * @param {Widget} ui\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    public setUiSize(ui: mw.Widget, x: number, y: number) {\r\n        try {\r\n            ui[\"get\"]()[\"SetSize\"](x, y);\r\n        } catch (_) {\r\n            ui.size = new mw.Vector2(x, y);\r\n        }\r\n    }\r\n\r\n    public setUiSizeX(ui: mw.Widget, x: number) {\r\n        this.setUiSize(ui, x, ui.size.y);\r\n    }\r\n\r\n    public setUiSizeY(ui: mw.Widget, y: number) {\r\n        this.setUiSize(ui, ui.size.x, y);\r\n    }\r\n\r\n    /**\r\n     * 使用 x,y 而非 Vector2 直接设定 UI 缩放.\r\n     * @param {Widget} ui\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    public setUiScale(ui: mw.Widget, x: number, y: number) {\r\n        try {\r\n            if (!ui[\"_setRenderScale\"]) {\r\n                ui[\"_setRenderScale\"] = new mw.Vector2(x, y)[\"toUEVector2D\"]();\r\n            } else {\r\n                ui[\"_setRenderScale\"].X = x;\r\n                ui[\"_setRenderScale\"].Y = y;\r\n            }\r\n            ui[\"w\"][\"SetRenderScale\"](ui[\"_setRenderScale\"]);\r\n        } catch (_) {\r\n            ui.renderScale = new mw.Vector2(x, y);\r\n        }\r\n    }\r\n\r\n    public setUiScaleX(ui: mw.Widget, x: number) {\r\n        this.setUiScale(ui, x, ui.renderScale.y);\r\n    }\r\n\r\n    public setUiScaleY(ui: mw.Widget, y: number) {\r\n        this.setUiScale(ui, ui.renderScale.x, y);\r\n    }\r\n\r\n    /**\r\n     * 检查为何 UI 控件未显示.\r\n     * @param {mw.Widget} widget\r\n     * @returns {[WidgetNotShownReason, AttributiveNotShownWidget[]]}\r\n     */\r\n    public whyUiNotShown(widget: mw.Widget): [WidgetNotShownReason, AttributiveNotShownWidget[]] {\r\n        let focus = widget;\r\n        let self = true;\r\n        let attached = false;\r\n        let selfReason: WidgetNotShownReason;\r\n        let gaps: AttributiveNotShownWidget[] = [];\r\n        let viewPortSize = this.getUiVirtualFullSize();\r\n\r\n        while (focus) {\r\n            let reason: WidgetNotShownReason = WidgetNotShownReason.Null;\r\n            if (focus.renderOpacity <= 1e-6) {\r\n                reason |= WidgetNotShownReason.Transparent;\r\n            }\r\n            if (focus.visibility === mw.SlateVisibility.Hidden) {\r\n                reason |= WidgetNotShownReason.Hidden;\r\n            } else if (focus.visibility === mw.SlateVisibility.Collapsed) {\r\n                reason |= WidgetNotShownReason.Collapsed;\r\n            }\r\n\r\n            const position = focus.position;\r\n            const size = focus.size;\r\n            const scale = focus.renderScale;\r\n\r\n            if (position.x + size.x < 0 ||\r\n                position.y + size.y < 0 ||\r\n                position.x > viewPortSize.x ||\r\n                position.y > viewPortSize.y) {\r\n                reason |= WidgetNotShownReason.OutOfView;\r\n            }\r\n\r\n            if (size.x * size.y * scale.x * scale.y < 10) {\r\n                reason |= WidgetNotShownReason.TooSmall;\r\n            }\r\n            if (self) {\r\n                selfReason = reason;\r\n            } else if (reason !== WidgetNotShownReason.Null) {\r\n                gaps.push({\r\n                    gap: focus,\r\n                    reason: reason,\r\n                });\r\n            }\r\n\r\n            if (self &&\r\n                widget instanceof mw.Button &&\r\n                widget.normalImageDrawType === mw.SlateBrushDrawType.NoDrawType) {\r\n                reason |= WidgetNotShownReason.BtnImageNoDraw;\r\n            }\r\n\r\n            self = false;\r\n            focus = focus.parent;\r\n            if (focus === mw.UIService.canvas) attached = true;\r\n        }\r\n\r\n        if (!attached) {\r\n            selfReason |= WidgetNotShownReason.NotAttached;\r\n        }\r\n        return [selfReason, gaps];\r\n    }\r\n\r\n    /**\r\n     * UI 坐标系下 Viewport 全尺寸.\r\n     * @return {mw.Vector2}\r\n     */\r\n    public getUiVirtualFullSize(): mw.Vector2 {\r\n        return getViewportWidgetGeometry()\r\n            ?.getAbsoluteSize()\r\n            ?.divide(getViewportScale());\r\n    }\r\n\r\n    /**\r\n     * Viewport 纵横比. x/y.\r\n     * @return {number}\r\n     */\r\n    public getViewportRatio(): number {\r\n        const s = getViewportSize();\r\n        return s.x / s.y;\r\n    }\r\n\r\n    /**\r\n     * 获取 窗口失焦回调.\r\n     * @desc WindowUtil.onDefocus 的多次调用将生成多次回调.\r\n     * @return {Delegate.SimpleDelegate<void>}\r\n     */\r\n    public getOnWindowsBlurDelegate(): Delegate.SimpleDelegate<void> {\r\n        if (!this._globalOnlyOnBlurDelegate) {\r\n            this._globalOnlyOnBlurDelegate = new Delegate.SimpleDelegate<void>();\r\n            WindowUtil.onDefocus.add(() => this._globalOnlyOnBlurDelegate.invoke());\r\n        }\r\n\r\n        return this._globalOnlyOnBlurDelegate;\r\n    }\r\n\r\n    /**\r\n     * 垂直地形侦测.\r\n     * 从起始点创建一条垂直向下的射线 返回命中到任何其他物体的命中点信息.\r\n     * @param startPoint 起始点.\r\n     * @param length 侦测距离.\r\n     * @param self 自身 不参与检测.\r\n     * @param ignoreObjectGuids 忽略物体 Guid.\r\n     * @param debug 是否 绘制调试线.\r\n     * @return hitPoint 命中首个点的命中信息 当未命中时返回 null.\r\n     */\r\n    public detectVerticalTerrain(startPoint: mw.Vector,\r\n                                 length: number = 1000,\r\n                                 self: mw.GameObject = undefined,\r\n                                 ignoreObjectGuids: string[] = [],\r\n                                 debug: boolean = false): mw.HitResult | undefined {\r\n        return QueryUtil.lineTrace(\r\n            startPoint,\r\n            this.newWithZ(startPoint, startPoint.z - length),\r\n            false,\r\n            debug,\r\n            self ? [self.gameObjectId, ...ignoreObjectGuids] : [...ignoreObjectGuids],\r\n            false,\r\n            false)[0] ?? undefined;\r\n    }\r\n\r\n    /**\r\n     * 垂直地形采样.\r\n     * 从起始平台创建一条垂直向下的射线 返回命中到任何其他物体的命中点位置.\r\n     * @param {IPoint2} startPoint\r\n     * @param {number} platform\r\n     * @param {number} length\r\n     * @param {string[]} ignores\r\n     * @param {boolean} ignoreByType\r\n     * @param {boolean} traceSkeletonOnly\r\n     * @param {mw.GameObject} self\r\n     * @param {boolean} down\r\n     * @param {boolean} debug\r\n     * @return {mw.HitResult[] | undefined}\r\n     */\r\n    public sampleVerticalTerrain(startPoint: IPoint2,\r\n                                 platform: number,\r\n                                 length: number,\r\n                                 down: boolean = true,\r\n                                 ignores: string[] = undefined,\r\n                                 ignoreByType: boolean = false,\r\n                                 traceSkeletonOnly: boolean = false,\r\n                                 self: mw.GameObject = undefined,\r\n                                 debug: boolean = false): mw.HitResult[] | undefined {\r\n        return QueryUtil.lineTrace(\r\n            new Vector(startPoint.x, startPoint.y, platform),\r\n            new Vector(startPoint.x, startPoint.y, platform + (down ? (-length) : length)),\r\n            true,\r\n            debug,\r\n            ignores,\r\n            ignoreByType,\r\n            traceSkeletonOnly,\r\n            self) ?? undefined;\r\n    }\r\n\r\n    /**\r\n     * 忽略自身的 GameObject 垂直地形侦测.\r\n     * @param self\r\n     * @param length\r\n     * @param ignoreObjectGuids\r\n     * @param debug\r\n     */\r\n    public detectGameObjectVerticalTerrain(self: mw.GameObject,\r\n                                           length: number = 1000,\r\n                                           ignoreObjectGuids: string[] = [],\r\n                                           debug: boolean = false): mw.HitResult | null {\r\n        if (!self) return null;\r\n        return this.detectVerticalTerrain(\r\n            self.worldTransform.position,\r\n            length,\r\n            self,\r\n            ignoreObjectGuids,\r\n            debug,\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 角色正下方地形侦测.\r\n     * 从 角色角色胶囊体 下圆心 创建一条垂直向下的射线 返回命中到任何其他物体的命中点信息.\r\n     * @param length 最大探测距离.\r\n     * @param ignoreObjectGuids 忽略物体 Guid.\r\n     * @param debug 是否 绘制调试线.\r\n     * @return hitPoint 命中首个点的命中信息 当未命中时返回 null.\r\n     */\r\n    public detectCurrentCharacterTerrain(length: number = 1000,\r\n                                         ignoreObjectGuids: string[] = [],\r\n                                         debug: boolean = false) {\r\n        if (!SystemUtil.isClient()) {\r\n            return null;\r\n        }\r\n\r\n        const character = Player.localPlayer.character;\r\n        const result = this.detectVerticalTerrain(\r\n            this.getCharacterCapsuleLowerCenter(character),\r\n            length,\r\n            character,\r\n            ignoreObjectGuids);\r\n        if (debug && result) {\r\n            this.drawRay(result.position, result.impactNormal, 100);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 计算角色在地形上运动时的倾倒角.\r\n     * 返回值为以正交系轴为参考.\r\n     * @param character\r\n     * @param ignoreObjectGuids 忽略物体 Guid.\r\n     * @return [pitch, roll] 旋转角度.\r\n     */\r\n    public calCentripetalAngle(character: mw.Character,\r\n                               ignoreObjectGuids: string[] = []) {\r\n        const hitInfo = this.detectCurrentCharacterTerrain(undefined, ignoreObjectGuids, false);\r\n        if (hitInfo) {\r\n            const terrainNormal = hitInfo.impactNormal;\r\n            const transform = character.worldTransform;\r\n\r\n            const currUnitRight = mw.Vector.projectOnPlane(transform.getRightVector(), mw.Vector.up);\r\n            const currUnitForward = mw.Vector.projectOnPlane(transform.getForwardVector(), mw.Vector.up);\r\n            const currUnitUp = mw.Vector.cross(currUnitForward, currUnitRight);\r\n\r\n            const sidePlaneNormal = currUnitRight;\r\n            const frontPlaneNormal = currUnitForward;\r\n\r\n            const projSide = mw.Vector.projectOnPlane(\r\n                terrainNormal,\r\n                sidePlaneNormal,\r\n            );\r\n            const projFront = mw.Vector.projectOnPlane(\r\n                terrainNormal,\r\n                frontPlaneNormal,\r\n            );\r\n\r\n            let pitch: number = mw.Vector.angle3D(\r\n                currUnitUp,\r\n                projSide);\r\n            let roll: number = mw.Vector.angle3D(\r\n                currUnitUp,\r\n                projFront);\r\n\r\n            pitch *= mw.Vector.angle3D(\r\n                currUnitForward,\r\n                projSide) > 90 ? -1 : 1;\r\n            roll *= mw.Vector.angle3D(\r\n                currUnitRight,\r\n                projFront) > 90 ? -1 : 1;\r\n\r\n            return [pitch, roll];\r\n        } else return null;\r\n    }\r\n\r\n    /**\r\n     * 绘制 Debug 用射线.\r\n     * @param startPoint\r\n     * @param direction\r\n     * @param distance\r\n     */\r\n    public drawRay(startPoint: mw.Vector,\r\n                   direction: mw.Vector,\r\n                   distance: number = 3000): void {\r\n        QueryUtil.lineTrace(\r\n            startPoint,\r\n            startPoint.clone().add(direction.clone().normalize().multiply(distance)),\r\n            true,\r\n            true);\r\n    }\r\n\r\n    /**\r\n     * 是否 两点之间存在合法路径.\r\n     * @param origin\r\n     * @param dest\r\n     */\r\n    public hasValidPath(origin: Vector, dest: Vector): boolean {\r\n        return Navigation.findPath(\r\n            origin,\r\n            dest,\r\n        ).length > 0;\r\n    }\r\n\r\n    /**\r\n     * KV 方式查询 ModuleData.\r\n     * @param {string} moduleDataName\r\n     * @param {string} userId\r\n     * @param {string} defaultValue\r\n     * @return {Promise<string>}\r\n     */\r\n    public async queryModuleData<T extends object>(moduleDataName: string, userId: string, defaultValue: T = {} as T): Promise<T> {\r\n        const data = await DataStorage.asyncGetData(this.getModuleDataKey(userId, moduleDataName));\r\n        if (data.code !== mw.DataStorageResultCode.Success) return Promise.reject(`Query failed. error code: ${data.code}.`);\r\n\r\n        if (this.isNullOrUndefined(data.data)) return defaultValue;\r\n        else return data.data;\r\n    }\r\n\r\n    /**\r\n     * KV 方式更新 ModuleData.\r\n     * @param {string} moduleDataName\r\n     * @param {string} userId\r\n     * @param {string} value\r\n     * @return {Promise<boolean>}\r\n     */\r\n    public async updateModuleData(moduleDataName: string, userId: string, value: object): Promise<boolean> {\r\n        const data: mw.DataStorageResultCode = await DataStorage.asyncSetData(this.getModuleDataKey(userId, moduleDataName), value);\r\n        if (data !== mw.DataStorageResultCode.Success) {\r\n            mw.console.warn(`update other game module data failed. error code: ${data}`);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 获取 ModuleData Key.\r\n     * @param {string} userId\r\n     * @param {string} moduleDataName\r\n     * @return {string}\r\n     */\r\n    public getModuleDataKey(userId: string, moduleDataName: string): string {\r\n        return `${userId}_SubData_${moduleDataName}`;\r\n    }\r\n\r\n    /**\r\n     * 获取当前游戏版本.\r\n     */\r\n    public getEditorVersion(): EditorVersion {\r\n        let version = mw.SystemUtil.getFullEditorVersion();\r\n        if (version.startsWith(\"v\") || version.startsWith(\"V\")) {\r\n            version = version.substring(1);\r\n        }\r\n        const versions = version.split(\".\");\r\n        return new EditorVersion(Number(versions[1] ?? 0),\r\n            Number(versions[3] ?? 0),\r\n            Number(versions[4] ?? 0));\r\n    }\r\n\r\n    /**\r\n     * 是否 当前平台默认使用鼠标.\r\n     * @return {boolean}\r\n     */\r\n    public get useMouse(): boolean {\r\n        if (this._useMouse === undefined) {\r\n            switch (mw.SystemUtil.currentPlatform) {\r\n                case  mw.RuntimePlatform.Windows:\r\n                case  mw.RuntimePlatform.Linux:\r\n                case  mw.RuntimePlatform.MacOS:\r\n                    this._useMouse = true;\r\n                    break;\r\n                case  mw.RuntimePlatform.Android:\r\n                case  mw.RuntimePlatform.iOS:\r\n                default:\r\n                    this._useMouse = false;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return this._useMouse;\r\n    }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n}\r\n\r\n//#region Type Guard\r\n/**\r\n * Prototype of a class constructor.\r\n */\r\nexport type Constructor<TResult> = new (...args: Array<unknown>) => TResult;\r\n\r\n/**\r\n * Constructor of an abstract-allow class.\r\n */\r\nexport type AbstractAllowClass<TResult> = Constructor<TResult> | Function;\r\n\r\n/**\r\n * A function taking one argument and returning a boolean result.\r\n * TArg void default.\r\n */\r\nexport type Predicate<TArg = void> = (arg: TArg) => boolean;\r\n\r\n/**\r\n * A function taking no argument and returning a result.\r\n */\r\nexport type Expression<TResult> = () => TResult;\r\n\r\n/**\r\n * A function taking any arguments and returning any result.\r\n */\r\nexport type Method = (...params: unknown[]) => unknown;\r\n\r\n/**\r\n * Type of Value in enum.\r\n */\r\nexport type ValueTypeInEnum<E> = E[keyof E];\r\n\r\n/**\r\n * Types of ParamList in Func.\r\n * @example\r\n * function testFunc(a: number, b: string, c: boolean) {\r\n *     mw.console.log(a, b, c);\r\n * }\r\n *\r\n * class Foo {\r\n *     testFunc(a: number, b: string, c: boolean) {\r\n *         mw.console.log(a, b, c);\r\n *     }\r\n * }\r\n *\r\n * const paramList: ParamListInFunc<typeof testFunc> = [1, \"2\", false];\r\n * const paramListInClass: ParamListInFunc<Foo[\"testFunc\"]> = [1, \"2\", true];\r\n */\r\nexport type ParamListInFunc<T> = T extends (...args: infer P) => unknown ? P : never;\r\n\r\n/**\r\n * Types of Plural Optional.\r\n * @desc If T is Array, return T, else return [T].\r\n */\r\nexport type PluralOptional<T> = T extends Array<unknown> ? T : [T];\r\n\r\n/**\r\n * Getter.\r\n */\r\nexport type Getter<T> = () => T;\r\n\r\n/**\r\n * Setter.\r\n */\r\nexport type Setter<T> = (val: T) => void;\r\n\r\ndeclare const _: unique symbol;\r\n\r\n/**\r\n * NoOverride.\r\n * @desc you shouldn't override the function return this type.\r\n * @desc 你不应该重写返回此类型的函数.\r\n */\r\nexport type NoOverride = { [_]: typeof _; }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Types\r\nexport namespace GtkTypes {\r\n    export interface Vector2 {\r\n        x: number;\r\n        y: number;\r\n    }\r\n\r\n    export interface Vector3 {\r\n        x: number;\r\n        y: number;\r\n        z: number;\r\n    }\r\n\r\n    export type VectorLike = Vector2 | Vector3;\r\n\r\n    export type TimeFormatDimensionFlagsLike = TimeFormatDimensionFlags | Tf;\r\n\r\n    /**\r\n     * 时间值维度 枚举.\r\n     *\r\n     * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n     * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n     * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n     * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n     * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n     * @author LviatYi\r\n     * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n     * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n     */\r\n    export enum TimeFormatDimensionFlags {\r\n        /**\r\n         * 毫秒.\r\n         */\r\n        Millisecond = 1 << 1,\r\n        /**\r\n         * 秒.\r\n         */\r\n        Second = 1 << 2,\r\n        /**\r\n         * 分.\r\n         */\r\n        Minute = 1 << 3,\r\n        /**\r\n         * 时.\r\n         */\r\n        Hour = 1 << 4,\r\n        /**\r\n         * 日.\r\n         */\r\n        Day = 1 << 5,\r\n        /**\r\n         * 月.\r\n         */\r\n        Month = 1 << 6,\r\n        /**\r\n         * 年.\r\n         */\r\n        Year = 1 << 7,\r\n    }\r\n\r\n    /**\r\n     * 时间值维度 枚举 简写.\r\n     * @desc 等价于 {@link TimeFormatDimensionFlags}.\r\n     */\r\n    export enum Tf {\r\n        /**\r\n         * 毫秒.\r\n         */\r\n        Ms = 1 << 1,\r\n        /**\r\n         * 秒.\r\n         */\r\n        S = 1 << 2,\r\n        /**\r\n         * 分.\r\n         */\r\n        M = 1 << 3,\r\n        /**\r\n         * 时.\r\n         */\r\n        H = 1 << 4,\r\n        /**\r\n         * 日.\r\n         */\r\n        D = 1 << 5,\r\n        /**\r\n         * 月.\r\n         */\r\n        Mon = 1 << 6,\r\n        /**\r\n         * 年.\r\n         */\r\n        Y = 1 << 7,\r\n    }\r\n\r\n    /**\r\n     * 性别 枚举.\r\n     *\r\n     * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n     * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n     * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n     * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n     * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n     * @author LviatYi\r\n     * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n     * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n     */\r\n    export enum GenderTypes {\r\n        /**\r\n         * 武装直升机.\r\n         */\r\n        Helicopter,\r\n        /**\r\n         * 女性.\r\n         */\r\n        Female,\r\n        /**\r\n         * 男性.\r\n         */\r\n        Male,\r\n    }\r\n\r\n    /**\r\n     * 精度 枚举.\r\n     */\r\n    export enum Epsilon {\r\n        /**\r\n         * 正常.\r\n         * @type {Epsilon.Normal}\r\n         */\r\n        Normal = 1e-6,\r\n        /**\r\n         * 低精度.\r\n         * @type {Epsilon.Low}\r\n         */\r\n        Low = 1e-4,\r\n        /**\r\n         * 高精度.\r\n         * @type {Epsilon.High}\r\n         */\r\n        High = 1e-8,\r\n        /**\r\n         * 超高精度.\r\n         * @type {Epsilon.ExtraHigh}\r\n         */\r\n        ExtraHigh = 1e-12,\r\n        /**\r\n         *\r\n         * @type {Epsilon.Scientific}\r\n         */\r\n        Scientific = 1e-16,\r\n    }\r\n\r\n    /**\r\n     * 时间间隔 枚举.\r\n     */\r\n    export enum Interval {\r\n        None = 0,\r\n        Hz144 = 1e3 / 144,\r\n        Hz120 = 1e3 / 120,\r\n        Hz90 = 1e3 / 90,\r\n        Hz60 = 1e3 / 60,\r\n        Hz30 = 1e3 / 30,\r\n        Sensitive = 0.1e3,\r\n        Fast = 0.5e3,\r\n        PerSec = 1e3,\r\n        Slow = 3e3,\r\n        Logy = 5e3,\r\n        PerMin = 60e3,\r\n        PerHour = 60e3 * 60,\r\n    }\r\n}\r\n\r\n/**\r\n * Patch Info.\r\n */\r\ninterface PatchInfo {\r\n    /**\r\n     * last wait duration.\r\n     */\r\n    lastWaitDuration?: number;\r\n\r\n    /**\r\n     * delay handler.\r\n     */\r\n    delayDo: () => void;\r\n\r\n    /**\r\n     * timer id.\r\n     * @type {number}\r\n     */\r\n    timerId: number;\r\n\r\n    /**\r\n     * Data cache.\r\n     * @type {unknown[]}\r\n     */\r\n    data: unknown[];\r\n}\r\n\r\n/**\r\n * Wait Info.\r\n */\r\ninterface WaitInfo {\r\n    /**\r\n     * last wait duration.\r\n     */\r\n    lastWaitDuration?: number;\r\n\r\n    /**\r\n     * delay handler.\r\n     */\r\n    delayDo: () => void;\r\n\r\n    /**\r\n     * timer id.\r\n     * @type {number}\r\n     */\r\n    timerId: number;\r\n\r\n    /**\r\n     * Data cache.\r\n     * @type {unknown[]}\r\n     */\r\n    data: unknown;\r\n}\r\n\r\nexport interface IColor {\r\n    r: number,\r\n    g: number,\r\n    b: number,\r\n    a?: number\r\n}\r\n\r\nexport type AnyPoint = IPoint2 | IPoint3;\r\n\r\n/**\r\n * Point in 2D.\r\n */\r\nexport interface IPoint2 {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\n/**\r\n * Point in 3D.\r\n */\r\nexport interface IPoint3 {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n}\r\n\r\nexport interface IEditorVersion {\r\n    main: number;\r\n    sub?: number;\r\n    patch?: number;\r\n}\r\n\r\n/**\r\n * Editor Version.\r\n */\r\nexport class EditorVersion implements IEditorVersion {\r\n    public constructor(\r\n        public main: number,\r\n        public sub?: number,\r\n        public patch?: number,\r\n    ) {\r\n    }\r\n\r\n    /**\r\n     * 版本比较.\r\n     * @desc 将忽略 undefined 字段，且遇到后不再继续比较.\r\n     * @param {EditorVersion} rhs\r\n     * @returns {number}\r\n     *      >0 自身较新.\r\n     *      =0 版本一直.\r\n     *      <0 自身较旧.\r\n     */\r\n    public compare(rhs: IEditorVersion): number {\r\n        let cmp: number = this.main - rhs.main;\r\n        if (cmp > 0) return cmp;\r\n\r\n        if (this.sub == undefined || rhs.sub == undefined) return 0;\r\n        cmp = this.sub - rhs.sub;\r\n        if (cmp > 0) return cmp;\r\n\r\n        if (this.patch == undefined || rhs.patch == undefined) return 0;\r\n        cmp = this.patch - rhs.patch;\r\n        return cmp;\r\n    }\r\n}\r\n\r\n/**\r\n * 控件不显示原因.\r\n * @flag\r\n */\r\nexport enum WidgetNotShownReason {\r\n    Null = 0,\r\n\r\n    /**\r\n     * 透明的.\r\n     * @desc render opacity 为 0.\r\n     */\r\n    Transparent = 1 << 0,\r\n    /**\r\n     * 隐藏的.\r\n     * @desc visibility = {@link mw.Visibility.Hidden}.\r\n     */\r\n    Hidden = 1 << 1,\r\n    /**\r\n     * 收缩的.\r\n     * @desc visibility = {@link mw.Visibility.Collapsed}.\r\n     */\r\n    Collapsed = 1 << 2,\r\n    /**\r\n     * 越界的.\r\n     * @desc 超出 Viewport.\r\n     */\r\n    OutOfView = 1 << 3,\r\n    /**\r\n     * 过小的.\r\n     * @desc 面积小于 10 px.\r\n     * @desc x * y * scale\r\n     */\r\n    TooSmall = 1 << 4,\r\n    /**\r\n     * 未绘制按钮.\r\n     * @desc 作为 Button 时，未绘制图片.\r\n     */\r\n    BtnImageNoDraw = 1 << 5,\r\n    /**\r\n     * 未挂载.\r\n     * @desc 未挂载于 ViewPort.\r\n     */\r\n    NotAttached = 1 << 6,\r\n}\r\n\r\n/**\r\n * Widget 未显示原因.\r\n */\r\nexport interface AttributiveNotShownWidget {\r\n    gap: mw.Widget;\r\n\r\n    reason: WidgetNotShownReason;\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Delegate\r\n/**\r\n * Delegate. 委托.\r\n * @desc provide some useful delegate.\r\n * @desc ---\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nexport namespace Delegate {\r\n    interface IDelegate<T, Func extends Function> {\r\n        /**\r\n         * add a delegate.\r\n         * @param {Func extends Funciton} func\r\n         * @param thisArg\r\n         * @param {number} alive call times.\r\n         *      default = -1. 无限制.\r\n         * @param {boolean} repeatable  whether can be added repeatedly.\r\n         *      default = false.\r\n         * @return {boolean}\r\n         *      - true success.\r\n         *      - false already exist.\r\n         */\r\n        add(func: Func, alive?: number, repeatable?: boolean, thisArg?: unknown): boolean;\r\n\r\n        /**\r\n         * add a delegate. can be only invoke once.\r\n         * behaves the same as add(func, 1)\r\n         * @param {Func extends Function} func\r\n         * @param thisArg\r\n         * @return {boolean}\r\n         *      - true success.\r\n         *      - false already exist.\r\n         */\r\n        once(func: Func, thisArg?: unknown): boolean;\r\n\r\n        /**\r\n         * add a delegate as the only alive callback.\r\n         * @desc remove all and add this.\r\n         * @param func\r\n         * @param thisArg\r\n         * @return {boolean}\r\n         *      - true success.\r\n         *      - false already exist.\r\n         */\r\n        only(func: Func, thisArg?: unknown): boolean;\r\n\r\n        /**\r\n         * invoke delegate.\r\n         * @desc you should not rely on the add order.\r\n         * @param param\r\n         */\r\n        invoke(...param: PluralOptional<T>): void;\r\n\r\n        /**\r\n         * remove a delegate.\r\n         * @param func\r\n         * @param thisArg\r\n         * @return boolean\r\n         *      - true success.\r\n         *      - false already exist.\r\n         */\r\n        remove(func: Func, thisArg?: unknown): boolean;\r\n    }\r\n\r\n    export type SimpleDelegateFunction<T = void> = (...param: PluralOptional<T>) => void;\r\n\r\n    export type ConditionDelegateFunction<T = void> = (...param: PluralOptional<T>) => boolean;\r\n\r\n    abstract class DelegateInfo {\r\n        callback: Function;\r\n\r\n        hitPoint: number;\r\n\r\n        thisArg: unknown;\r\n\r\n        protected constructor(callback: Function, hitPoint: number, thisArg?: unknown) {\r\n            this.callback = callback;\r\n            this.hitPoint = hitPoint;\r\n            this.thisArg = thisArg;\r\n        }\r\n\r\n        public equal(callback: Function, thisArg?: unknown): boolean {\r\n            return this.callback === callback &&\r\n                this.thisArg === thisArg;\r\n        }\r\n    }\r\n\r\n    class SimpleDelegateInfo<T> extends DelegateInfo {\r\n        declare callback: SimpleDelegateFunction<T>;\r\n\r\n        constructor(callback: SimpleDelegateFunction<T>, hitPoint: number, thisArg?: unknown) {\r\n            super(callback, hitPoint, thisArg);\r\n        }\r\n    }\r\n\r\n    class ConditionDelegateInfo<T> extends DelegateInfo {\r\n        declare callback: ConditionDelegateFunction<T>;\r\n\r\n        constructor(callback: ConditionDelegateFunction<T>, hitPoint: number, thisArg?: unknown) {\r\n            super(callback, hitPoint, thisArg);\r\n        }\r\n    }\r\n\r\n    abstract class Delegate<DI extends DelegateInfo> {\r\n        protected _callbackInfo: DI[] = [];\r\n\r\n        /**\r\n         * try to get the index of an existing delegate.\r\n         * @param func\r\n         * @param thisArg\r\n         * @return index func index. -1 not exist.\r\n         * @protected\r\n         */\r\n        protected getIndex(func: Function, thisArg?: unknown): number {\r\n            return this._callbackInfo.findIndex(item => {\r\n                return item.equal(func, thisArg);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * remove Func by index.\r\n         * @param index\r\n         * @protected\r\n         */\r\n        protected removeByIndex(index: number): void {\r\n            Gtk.removeByIndex(this._callbackInfo, index);\r\n        }\r\n\r\n        private _clearable: boolean = true;\r\n\r\n        /**\r\n         * remove all delegate.\r\n         */\r\n        public clear(): void {\r\n            if (this._clearable) this._callbackInfo.length = 0;\r\n            else mw.console.warn(\"GToolkit.Delegate\", \"Protected delegate can't be cleared.\");\r\n        }\r\n\r\n        /**\r\n         * whether remove all delegate is enable.\r\n         */\r\n        public get clearable(): boolean {\r\n            return this._clearable;\r\n        }\r\n\r\n        /**\r\n         * set clearable to false.\r\n         */\r\n        public setProtected(): this {\r\n            this._clearable = false;\r\n            return this;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Simple Delegate.\r\n     * 简单委托.\r\n     *\r\n     * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n     * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n     * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n     * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n     * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n     * @author LviatYi\r\n     * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n     * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n     */\r\n    export class SimpleDelegate<T = void>\r\n        extends Delegate<SimpleDelegateInfo<T>>\r\n        implements IDelegate<T, SimpleDelegateFunction<T>> {\r\n        public add(func: SimpleDelegateFunction<T>,\r\n                   alive: number = -1,\r\n                   repeatable: boolean = false,\r\n                   thisArg?: unknown): boolean {\r\n            if (!repeatable && this.getIndex(func) !== -1) {\r\n                return false;\r\n            }\r\n            this._callbackInfo.push(new SimpleDelegateInfo(func, alive, thisArg));\r\n        }\r\n\r\n        public once(func: SimpleDelegateFunction<T>, thisArg?: unknown): boolean {\r\n            return this.add(func, 1, false, thisArg);\r\n        }\r\n\r\n        public only(func: SimpleDelegateFunction<T>, thisArg?: unknown): boolean {\r\n            this.clear();\r\n            return this.add(func, undefined, false, thisArg);\r\n        }\r\n\r\n        public invoke(...param: PluralOptional<T>): void {\r\n            for (let i = this._callbackInfo.length - 1; i >= 0; --i) {\r\n                const callbackInfo = this._callbackInfo[i];\r\n\r\n                try {\r\n                    if (callbackInfo.hitPoint !== 0) {\r\n                        callbackInfo.callback.call(callbackInfo.thisArg, ...param);\r\n                    }\r\n                    if (callbackInfo.hitPoint > 0) --callbackInfo.hitPoint;\r\n                    if (callbackInfo.hitPoint === 0) this.removeByIndex(i);\r\n                } catch (e) {\r\n                    mw.console.error(e);\r\n                    mw.console.error(e.stack);\r\n                }\r\n            }\r\n        }\r\n\r\n        public remove(func: SimpleDelegateFunction<T>, thisArg?: unknown): boolean {\r\n            const index: number = this.getIndex(func, thisArg);\r\n            if (index !== -1) {\r\n                this.removeByIndex(index);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Condition Delegate\r\n     * 条件委托.\r\n     *\r\n     * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n     * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n     * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n     * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n     * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n     * @author LviatYi\r\n     * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n     * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n     */\r\n    export class ConditionDelegate<T = void>\r\n        extends Delegate<ConditionDelegateInfo<T>>\r\n        implements IDelegate<T, ConditionDelegateFunction<T>> {\r\n        public add(func: ConditionDelegateFunction<T>,\r\n                   alive: number = -1,\r\n                   repeatable: boolean = false,\r\n                   thisArg?: unknown): boolean {\r\n            if (!repeatable && this.getIndex(func, thisArg) !== -1) {\r\n                return false;\r\n            }\r\n            this._callbackInfo.push(new ConditionDelegateInfo(func, alive, thisArg));\r\n        }\r\n\r\n        public once(func: ConditionDelegateFunction<T>, thisArg?: unknown): boolean {\r\n            return this.add(func, 1, false, thisArg);\r\n        }\r\n\r\n        public only(func: ConditionDelegateFunction<T>, thisArg?: unknown): boolean {\r\n            this.clear();\r\n            return this.add(func, 1, false, thisArg);\r\n        }\r\n\r\n        public invoke(...param: PluralOptional<T>): void {\r\n            for (let i = this._callbackInfo.length - 1; i >= 0; --i) {\r\n                const callbackInfo = this._callbackInfo[i];\r\n                let ret: boolean;\r\n                if (callbackInfo.hitPoint !== 0) {\r\n                    try {\r\n                        ret = callbackInfo.callback.call(callbackInfo.thisArg, ...param);\r\n                    } catch (e) {\r\n                        ret = false;\r\n                        mw.console.error(e.stack);\r\n                    }\r\n                }\r\n\r\n                if (callbackInfo.hitPoint > 0 && ret) {\r\n                    --callbackInfo.hitPoint;\r\n                }\r\n\r\n                if (callbackInfo.hitPoint === 0) {\r\n                    this.removeByIndex(i);\r\n                }\r\n            }\r\n        }\r\n\r\n        public remove(func: ConditionDelegateFunction<T>, thisArg?: unknown): boolean {\r\n            const index: number = this.getIndex(func, thisArg);\r\n            if (index !== -1) {\r\n                this.removeByIndex(index);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n}\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Singleton\r\n\r\n/**\r\n * Singleton factory.\r\n * To create a Singleton, extends Singleton<YourClass>().\r\n * @example\r\n * class UserDefineSingleton extends Singleton<UserDefineSingleton>() {\r\n *      public name: string;\r\n *\r\n *      public someSubMethod(): void {\r\n *          mw.console.log(\"someSubMethod in UserDefineSingleton called\");\r\n *      }\r\n *\r\n *      protected onConstruct(): void {\r\n *          this.name = \"user define singleton\";\r\n *      }\r\n *  }\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @constructor\r\n * @beta\r\n */\r\nexport function Singleton<T>() {\r\n    return class {\r\n        public static _instance: T = undefined;\r\n\r\n        public createTime: Date;\r\n\r\n        /**\r\n         * we don't recommend to use it.\r\n         * if you want to do something when constructing, override onConstructor.\r\n         * @protected\r\n         */\r\n        protected constructor() {\r\n            this.createTime = new Date();\r\n        }\r\n\r\n        public static getInstance(): T {\r\n            if (!this[\"_instance\"]) {\r\n                this[\"_instance\"] = new this() as T;\r\n                (this[\"_instance\"] as any).onConstruct();\r\n            }\r\n            return this._instance;\r\n        }\r\n\r\n        /**\r\n         * override when need extend constructor.\r\n         */\r\n        public onConstruct(): void {\r\n        }\r\n    };\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region RandomGenerator\r\n/**\r\n * Random Generator.\r\n * generate a number array and convert to supported types.\r\n */\r\nexport class RandomGenerator {\r\n    private _result: number[] = [];\r\n\r\n    public toVector3(fill: number = 0): mw.Vector {\r\n        return new mw.Vector(this._result[0] ?? fill, this._result[1] ?? fill, this._result[2] ?? fill);\r\n    }\r\n\r\n    public toVector2(fill: number = 0): mw.Vector2 {\r\n        return new mw.Vector2(this._result[0] ?? fill, this._result[1] ?? fill);\r\n    }\r\n\r\n    public toRotation(fill: number = 0): mw.Rotation {\r\n        return new mw.Rotation(this._result[0] ?? fill, this._result[1] ?? fill, this._result[2] ?? fill);\r\n    }\r\n\r\n    public from(value: number[]): this {\r\n        this._result = value;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * generate random array.\r\n     * @param {number | number[]} length length or scale.\r\n     * @param {() => number} randomFunc random function.\r\n     *      - default Math.random\r\n     * @return {this}\r\n     */\r\n    public random(length: number | number[], randomFunc: () => number = Math.random): this {\r\n        const isLength = typeof length === \"number\";\r\n        this._result = new Array(isLength ? length : length.length);\r\n        for (let i = 0; i < this._result.length; i++) {\r\n            this._result[i] = randomFunc() * (isLength ? 1 : length[i]);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * generate random point on unit circle.\r\n     * @return {this}\r\n     */\r\n    public randomCircle(): this {\r\n        let r = Math.random() * Math.PI * 2;\r\n        this._result = [Math.cos(r), Math.sin(r)];\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * handle result by index.\r\n     * @param {(value: number, index: number) => number} handler\r\n     * @return {this}\r\n     */\r\n    public handle(handler: (value: number, index: number) => number): this {\r\n        for (let i = 0; i < this._result.length; i++) {\r\n            this._result[i] = handler(this._result[i], i);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Switcher\r\n/**\r\n * advance switch.\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nexport class Switcher {\r\n    private _cases: (boolean | number)[][] = [];\r\n    private _callbacks: Method[] = [];\r\n    private _default: Method = null;\r\n\r\n    /**\r\n     * build judge case.\r\n     * @param callback\r\n     * @param values\r\n     *  when value is null or undefined, it will be ignored.\r\n     */\r\n    public case(callback: Method, ...values: (boolean | number)[]): this {\r\n        this._cases.push(values);\r\n        this._callbacks.push(callback);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * build judge default case.\r\n     * @param callback\r\n     */\r\n    public default(callback: Method): this {\r\n        this._default = callback;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * judge values.\r\n     * @param values\r\n     */\r\n    public judge(...values: (boolean | number)[]) {\r\n        for (let i = 0; i < this._cases.length; i++) {\r\n            let result = true;\r\n            for (let j = 0; j < values.length; j++) {\r\n                const pole = this._cases[i][j];\r\n                if (pole === null || pole === undefined) {\r\n                    continue;\r\n                }\r\n                result = values[j] === pole;\r\n                if (!result) break;\r\n            }\r\n\r\n            if (result) {\r\n                this?._callbacks[i]?.();\r\n                return;\r\n            }\r\n        }\r\n\r\n        this?._default();\r\n    }\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Regulator\r\n/**\r\n * 分帧器.\r\n * @desc 为某个行为设定频率上限.\r\n * @desc ---\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author minjia.zhang\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nexport class Regulator {\r\n    private _lastUpdates: number[] = [];\r\n\r\n    /**\r\n     * 更新间隔. ms.\r\n     */\r\n    public updateInterval: number;\r\n\r\n    /**\r\n     * 生命值.\r\n     * @desc 阶段时间内的可用次数.\r\n     * @type {number}\r\n     */\r\n    public hitPoint: number = 1;\r\n\r\n    /**\r\n     * 尝试申请 下一次.\r\n     */\r\n    public request(): boolean {\r\n        const now = Date.now();\r\n        const threshold = now - this.updateInterval;\r\n        while (this._lastUpdates.length >= this.hitPoint) {\r\n            if (this._lastUpdates[0] < threshold) {\r\n                this._lastUpdates.shift();\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        if (this._lastUpdates.length < this.hitPoint) {\r\n            this._lastUpdates.push(now);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * @param updateInterval 更新间隔. ms\r\n     * @param hitPoint 时段内次数.\r\n     */\r\n    constructor(updateInterval: number = 1e3, hitPoint = 1) {\r\n        this.updateInterval = updateInterval;\r\n        this.hitPoint = hitPoint;\r\n    }\r\n\r\n    /**\r\n     * 频率. 每秒 ready 次数.\r\n     */\r\n    public frequency(val: number): this {\r\n        this.updateInterval = 1000 / val;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 间隔.\r\n     * @param val\r\n     */\r\n    public interval(val: number): this {\r\n        this.updateInterval = val;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 获取只读的更新时间列表.\r\n     */\r\n    public getRecord(): ReadonlyArray<number> {\r\n        return this._lastUpdates;\r\n    }\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region ObjectPool\r\n/**\r\n * 可暂时回收的.\r\n */\r\nexport interface IRecyclable {\r\n    /**\r\n     * 使能. 赋能. 激活.\r\n     * @param param\r\n     */\r\n    makeEnable(...param: unknown[]): void;\r\n\r\n    /**\r\n     * 去使能. 回收. 去活.\r\n     */\r\n    makeDisable(): void;\r\n\r\n    /**\r\n     * 析构函数.\r\n     */\r\n    makeDestroy?(): void;\r\n}\r\n\r\n/**\r\n * 对象池选项.\r\n */\r\nexport interface IObjectPoolOption<T> {\r\n    /**\r\n     * 构造函数.\r\n     * @desc 用于在对象池空时生成新实例.\r\n     * @desc 与构造函数二选一即可.\r\n     * @desc 构造函数优先.\r\n     */\r\n    construct?: Constructor<T>;\r\n\r\n    /**\r\n     * 实例生成函数.\r\n     * @desc 用于在对象池空时生成新实例.\r\n     * @desc 与构造函数二选一即可.\r\n     * @desc 构造函数优先.\r\n     * @return {T}\r\n     */\r\n    generator?: () => T;\r\n\r\n    /**\r\n     * 自动减半时间间隔. ms.\r\n     *      - 0 [不推荐] 不开启自动回收.\r\n     */\r\n    autoHalvingInterval?: number;\r\n\r\n    /**\r\n     * 最低阈值.\r\n     */\r\n    floor?: number;\r\n\r\n    /**\r\n     * 立即按照最低阈值生成实例.\r\n     * @desc default false.\r\n     */\r\n    instantly?: boolean;\r\n}\r\n\r\n/**\r\n * 对象池.\r\n * @desc 执行自动垃圾回收.\r\n * @desc 可回收对象需实现 {@link IRecyclable} 接口.\r\n * @desc ---\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nexport class ObjectPool<T extends IRecyclable> {\r\n//#region Member\r\n    private readonly _itemConstructor: Constructor<T>;\r\n\r\n    private readonly _itemGenerator: () => T;\r\n\r\n    private _pool: T[] = [];\r\n\r\n    private _tempPool: T[] = [];\r\n\r\n    private _lastAutoRecycleTime: number = 0;\r\n\r\n    private readonly _floor: number;\r\n\r\n    private _autoHalvingInterval: number;\r\n\r\n    public get autoHalvingInterval(): number {\r\n        return this._autoHalvingInterval;\r\n    }\r\n\r\n    /**\r\n     * 自动减半时间间隔. ms.\r\n     *      - 0 [不推荐] 不开启自动回收.\r\n     *      - 5 * 60e3. 5 min. 默认的.\r\n     */\r\n    public set autoHalvingInterval(value: number) {\r\n        if (value === this._autoHalvingInterval) {\r\n            return;\r\n        }\r\n\r\n        this._autoHalvingInterval = value;\r\n        if (this._autoHalvingTimer) {\r\n            clearInterval(this._autoHalvingTimer);\r\n            this._autoHalvingTimer = null;\r\n        }\r\n        if (value !== 0) {\r\n            this._autoHalvingTimer = mw.setInterval(\r\n                () => this.autoRecycle(),\r\n                value);\r\n        }\r\n    }\r\n\r\n    private _autoHalvingTimer: number;\r\n\r\n    private getNew(): T | null {\r\n        return this._itemConstructor ?\r\n            new this._itemConstructor() :\r\n            this?._itemGenerator() ?? null;\r\n    }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Event\r\n\r\n    /**\r\n     * 归还事件.\r\n     * @type {Delegate.SimpleDelegate<T>}\r\n     */\r\n    public readonly onPush: Delegate.SimpleDelegate<T> = new Delegate.SimpleDelegate();\r\n\r\n    /**\r\n     * 借出事件.\r\n     * @type {Delegate.SimpleDelegate<T>}\r\n     */\r\n    public readonly onPop: Delegate.SimpleDelegate<T> = new Delegate.SimpleDelegate();\r\n\r\n    /**\r\n     * 垃圾回收事件.\r\n     * @type {Delegate.SimpleDelegate<T[]>}\r\n     */\r\n    public readonly onRecycle: Delegate.SimpleDelegate<[T[]]> = new Delegate.SimpleDelegate();\r\n\r\n    /**\r\n     * 清除事件.\r\n     * @type {Delegate.SimpleDelegate<T[]>}\r\n     */\r\n    public readonly onClear: Delegate.SimpleDelegate<[T[]]> = new Delegate.SimpleDelegate();\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    public constructor(option: IObjectPoolOption<T>) {\r\n        this._itemConstructor = option?.construct;\r\n        this._itemGenerator = option?.generator;\r\n\r\n        if (!this._itemConstructor && !this._itemGenerator) {\r\n            mw.console.log(\r\n                \"GToolkit.ObjectPool\",\r\n                `you must provide a constructor or a generator.`);\r\n            return;\r\n        }\r\n\r\n        this.autoHalvingInterval = option?.autoHalvingInterval ?? 5 * 60e3;\r\n        this._floor = option?.floor ?? 0;\r\n\r\n        if (option?.instantly) {\r\n            for (let i = 0; i < this._floor; i++) {\r\n                this.push(this.getNew());\r\n            }\r\n        }\r\n    }\r\n\r\n//#region Controller\r\n\r\n    /**\r\n     * 使池回收一个对象.\r\n     * @param {T} rub\r\n     */\r\n    public push(...rub: T[]) {\r\n        try {\r\n            rub.forEach(r => r.makeDisable());\r\n            this._pool.push(...rub);\r\n            rub.forEach(r => this.onPush.invoke(...[r] as PluralOptional<T>));\r\n        } catch (e) {\r\n            mw.console.error(\"GToolkit.ObjectPool\");\r\n            mw.console.error(`error occurs in makeDisable. ${e}`);\r\n            mw.console.error(e.stack);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从池中取出一个对象 并赋初值..\r\n     * @param {any} params\r\n     */\r\n    public pop(...params: ParamListInFunc<T[\"makeEnable\"]>): T | null {\r\n        this._lastAutoRecycleTime = Date.now();\r\n        let need: T;\r\n        if (this._tempPool.length > 0) need = this._tempPool.pop();\r\n        else need = this._pool.pop();\r\n\r\n        if (!need) need = this.getNew();\r\n        if (!need) {\r\n            mw.console.warn(\r\n                \"GToolkit.ObjectPool\",\r\n                `item couldn't be generated.`);\r\n            return null;\r\n        }\r\n\r\n        this.onPop.invoke(...[need] as PluralOptional<T>);\r\n        try {\r\n            need.makeEnable(...params);\r\n        } catch (e) {\r\n            mw.console.error(\"GToolkit.ObjectPool\");\r\n            mw.console.error(`error occurs in makeEnable. ${e}`);\r\n            mw.console.error(e.stack);\r\n        }\r\n        return need;\r\n    }\r\n\r\n    /**\r\n     * 临时回收一个对象.\r\n     * @desc 临时回收的对象直到 {@link finishTemp} 后才调用 {@link makeDisable}.\r\n     * @desc 减少一次 {@link makeDisable} 调用\r\n     * @param {T} rub\r\n     */\r\n    public tempPush(...rub: T[]) {\r\n        this._tempPool.push(...rub);\r\n    }\r\n\r\n    /**\r\n     * 结束临时回收.\r\n     * @desc 立即回收所有临时回收对象\r\n     */\r\n    public finishTemp() {\r\n        this.push(...this._tempPool);\r\n        this._tempPool.length = 0;\r\n    }\r\n\r\n    /**\r\n     * 立即执行自动垃圾回收策略.\r\n     */\r\n    public doRecycle() {\r\n        if (this._tempPool.length > 0) this.finishTemp();\r\n        this.autoRecycle();\r\n    }\r\n\r\n    /**\r\n     * 清空池.\r\n     */\r\n    public clear() {\r\n        if (this._tempPool.length > 0) this.finishTemp();\r\n        this.onClear.invoke(this._pool);\r\n        this._pool.forEach(item => {\r\n            try {\r\n                item?.makeDestroy();\r\n            } catch (e) {\r\n                mw.console.error(\"GToolkit.ObjectPool\", `error occurs in makeDestroy.\\n${e.stack}`);\r\n            }\r\n        });\r\n        this._pool = [];\r\n    }\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n    private autoRecycle() {\r\n        if (this._pool.length <= this._floor) return;\r\n        const newLength = Math.max(\r\n            Math.floor(this._pool.length / 2),\r\n            this._floor,\r\n        );\r\n        const recycle = this._pool.splice(newLength);\r\n        this.onRecycle.invoke(recycle);\r\n        recycle.forEach(item => {\r\n            try {\r\n                item?.makeDestroy();\r\n            } catch (e) {\r\n                mw.console.error(\"GToolkit.ObjectPool\", `error occurs in makeDestroy.\\n${e.stack}`);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Hyper Text\r\n\r\n/**\r\n * HyperText 超文本解析器.\r\n * @desc 将超文本字符串转换为 Dom 树.\r\n * @desc 提供字符串切片功能.\r\n * @desc ---\r\n * ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟\r\n * ⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄\r\n * ⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄\r\n * ⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄\r\n * ⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n * @author LviatYi\r\n * @font JetBrainsMono Nerd Font Mono https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip\r\n * @fallbackFont Sarasa Mono SC https://github.com/be5invis/Sarasa-Gothic/releases/download/v0.41.6/sarasa-gothic-ttf-0.41.6.7z\r\n */\r\nexport class HyperText {\r\n    public static readonly RegTag = /<\\s*(\\/?)\\s*(u|b|i|s|color|size)\\s*(=.*?)?>/g;\r\n    public static readonly RegElement = /<\\s*(u|b|i|s|color|size)\\s*(=.*?)?>(.*?)<\\s*\\/\\1\\s*>/g;\r\n    public tag: string | undefined = undefined;\r\n    public attr: string = undefined;\r\n    public content: (string | HyperText)[] = [];\r\n\r\n    private _length: number;\r\n\r\n    public get length() {\r\n        if (this._length === undefined) {\r\n            this._length = this\r\n                .content\r\n                .reduce((prev, curr) => prev + curr.length, 0);\r\n        }\r\n\r\n        return this._length;\r\n    }\r\n\r\n    /**\r\n     * 转换为严格的超文本.\r\n     * @desc 严格超文本将补全未闭合的标签.\r\n     * @param {string} str\r\n     * @return {string | undefined} 当传入的超文本字符串非法时 返回 undefined.\r\n     *      - 当标签发生交错时 无效.\r\n     */\r\n    public static toStrictHyperText(str: string): string | undefined {\r\n        let tagStack: string[] = [];\r\n        this.RegTag.lastIndex = 0;\r\n\r\n        while (true) {\r\n            let result = this.RegTag.exec(str);\r\n            if (result) {\r\n                if (!Gtk.isNullOrEmpty(result[1])) {\r\n                    if (tagStack.length > 0 && tagStack[tagStack.length - 1] === result[2]) {\r\n                        tagStack.pop();\r\n                    } else {\r\n                        // Invalid HyperText.\r\n                        // 交错 Tag.\r\n                        return undefined;\r\n                    }\r\n                } else {\r\n                    tagStack.push(result[2]);\r\n                }\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        while (tagStack.length > 0) {\r\n            str += `</${tagStack.pop()}>`;\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    /**\r\n     * 从超文本字符串构建.\r\n     * @param {string} str\r\n     * @param {string} tag\r\n     * @param {string} attr\r\n     * @param {boolean} strict=true 是否 启用严格检查.\r\n     *      - false 需保证提供了严格有效的超文本字符串.\r\n     * @return {HyperText | undefined} 当传入的超文本字符串非法时 返回 undefined.\r\n     *      - 当标签发生交错时 无效.\r\n     */\r\n    public static fromString(str: string, tag?: string, attr?: string, strict: boolean = true): HyperText | undefined {\r\n        if (strict) str = this.toStrictHyperText(str);\r\n        if (!str) return undefined;\r\n\r\n        let hyperText: HyperText = new HyperText();\r\n        hyperText.tag = tag;\r\n        hyperText.attr = attr;\r\n\r\n        let walked = 0;\r\n        this.RegElement.lastIndex = 0;\r\n\r\n        while (walked < str.length) {\r\n            let result = this.RegElement.exec(str);\r\n\r\n            let pureLeft = result?.index ?? 0;\r\n            if (pureLeft > walked) {\r\n                hyperText.content.push(str.slice(walked, pureLeft));\r\n            }\r\n            if (result) {\r\n                let lastIndex = this.RegElement.lastIndex;\r\n                hyperText.content.push(\r\n                    HyperText.fromString(\r\n                        str.slice(\r\n                            pureLeft + result[1].length + (result[2]?.length ?? 0) + 2,\r\n                            pureLeft + result[1].length + (result[2]?.length ?? 0) + 2 + result[3].length),\r\n                        result[1],\r\n                        result[2],\r\n                        false),\r\n                );\r\n                this.RegElement.lastIndex = lastIndex;\r\n                walked = result.index + result[0].length;\r\n            } else {\r\n                hyperText.content.push(str.slice(walked));\r\n                break;\r\n            }\r\n        }\r\n\r\n        return hyperText;\r\n    }\r\n\r\n    /**\r\n     * 切片.\r\n     * @param {number} start\r\n     * @param {number} end\r\n     * @return {string}\r\n     */\r\n    public slice(start?: number, end?: number): string {\r\n        let result = \"\";\r\n\r\n        let walked = 0;\r\n        for (const content of this.content) {\r\n            if (walked >= end) break;\r\n\r\n            if (walked + content.length <= start) {\r\n                start -= content.length;\r\n                walked += content.length;\r\n                continue;\r\n            }\r\n\r\n            result += content.slice(start, end - walked);\r\n            start = Math.max(0, start - content.length);\r\n            walked += Math.min(content.length, end - walked);\r\n        }\r\n\r\n        return this.tag ? surroundByTag(result, this.tag, this.attr) : result;\r\n    }\r\n}\r\n\r\n/**\r\n * surround the string with tag.\r\n * @param {string} tag\r\n * @param {string} str\r\n * @param {string} attr\r\n * @return {string}\r\n */\r\nfunction surroundByTag(str: string, tag: string, attr?: string): string {\r\n    return `<${tag}${attr ?? \"\"}>${str}</${tag}>`;\r\n}\r\n\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄\r\n\r\n//#region Export\r\nconst Gtk = new GToolkit();\r\n\r\nexport default Gtk;\r\n//#endregion ⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠐⠒⠒⠒⠒⠚⠛⣿⡟⠄⠄⢠⠄⠄⠄⡄⠄⠄⣠⡶⠶⣶⠶⠶⠂⣠⣶⣶⠂⠄⣸⡿⠄⠄⢀⣿⠇⠄⣰⡿⣠⡾⠋⠄⣼⡟⠄⣠⡾⠋⣾⠏⠄⢰⣿⠁⠄⠄⣾⡏⠄⠠⠿⠿⠋⠠⠶⠶⠿⠶⠾⠋⠄⠽⠟⠄⠄⠄⠃⠄⠄⣼⣿⣤⡤⠤⠤⠤⠤⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄"],"names":[],"mappings":"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"}